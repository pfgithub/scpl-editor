{"ast":null,"code":"import _regeneratorRuntime from \"/Users/brandonjordan/Documents/GitHub/scpl-editor/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/brandonjordan/Documents/GitHub/scpl-editor/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/brandonjordan/Documents/GitHub/scpl-editor/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/brandonjordan/Documents/GitHub/scpl-editor/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/brandonjordan/Documents/GitHub/scpl-editor/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/brandonjordan/Documents/GitHub/scpl-editor/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/brandonjordan/Documents/GitHub/scpl-editor/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/brandonjordan/Documents/GitHub/scpl-editor/src/DownloadModal.tsx\";\nimport React, { Component } from \"react\";\nimport * as QRCode from \"qrcode\";\nimport { ModalContainer } from \"./ModalContainer\";\nimport { DownloadButton } from \"./DownloadButton\";\nimport prettyBytes from \"pretty-bytes\";\nimport shortcutDownloadPreviewIcon from \"./img/shortcut-file.png\";\nimport { uploadShortcut } from \"./Uploader\";\nimport { DownloadStatusSwitcher } from \"./DownloadStatusSwitcher\";\nimport \"./CreateEditShortcut.css\";\nexport var ShortcutDownloadPreviewButton =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ShortcutDownloadPreviewButton, _Component);\n\n  function ShortcutDownloadPreviewButton() {\n    _classCallCheck(this, ShortcutDownloadPreviewButton);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ShortcutDownloadPreviewButton).apply(this, arguments));\n  }\n\n  _createClass(ShortcutDownloadPreviewButton, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 22\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: shortcutDownloadPreviewIcon,\n        width: 130,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 23\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"shortcut-filename\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 24\n        },\n        __self: this\n      }, this.props.filename), React.createElement(\"div\", {\n        className: \"shortcut-filedetails\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 25\n        },\n        __self: this\n      }, prettyBytes(this.props.filesize)));\n    }\n  }]);\n\n  return ShortcutDownloadPreviewButton;\n}(Component);\nexport var DownloadModal =\n/*#__PURE__*/\nfunction (_Component2) {\n  _inherits(DownloadModal, _Component2);\n\n  function DownloadModal(props) {\n    var _this;\n\n    _classCallCheck(this, DownloadModal);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(DownloadModal).call(this, props));\n    _this.state = {\n      uploadStatus: \"None\"\n    };\n    return _this;\n  }\n\n  _createClass(DownloadModal, [{\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      if (nextProps.file !== this.props.file) {\n        this.setState({\n          uploadStatus: \"None\"\n        });\n      }\n    }\n  }, {\n    key: \"uploadFile\",\n    value: function () {\n      var _uploadFile = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var uploadResult, qrcode;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (this.props.file) {\n                  _context.next = 3;\n                  break;\n                }\n\n                this.setState({\n                  uploadStatus: \"Error\",\n                  uploadError: \"No file. Make sure your shortcut has no errors.\"\n                });\n                return _context.abrupt(\"return\");\n\n              case 3:\n                this.setState({\n                  uploadStatus: \"Uploading\"\n                });\n                _context.next = 6;\n                return uploadShortcut(this.props.file, this.props.filename);\n\n              case 6:\n                uploadResult = _context.sent;\n\n                if (!(uploadResult.result === \"error\")) {\n                  _context.next = 10;\n                  break;\n                }\n\n                this.setState({\n                  uploadStatus: \"Error\",\n                  uploadError: uploadResult.message\n                });\n                return _context.abrupt(\"return\");\n\n              case 10:\n                _context.next = 12;\n                return QRCode.toDataURL(uploadResult.url);\n\n              case 12:\n                qrcode = _context.sent;\n                this.setState({\n                  uploadStatus: \"URL\",\n                  uploadedURL: uploadResult.url,\n                  qrcode: qrcode\n                });\n\n              case 14:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function uploadFile() {\n        return _uploadFile.apply(this, arguments);\n      }\n\n      return uploadFile;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(ModalContainer, {\n        onCancel: function onCancel() {\n          return _this2.props.onCancel();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"modal\",\n        id: \"download-result\",\n        style: {\n          display: \"block\"\n        },\n        onClick: function onClick(e) {\n          return e.stopPropagation();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, \"Export Shortcut File\"), this.props.file ? React.createElement(\"div\", {\n        className: \"download-grid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, \"download\" in HTMLAnchorElement.prototype ? React.createElement(DownloadButton, {\n        filename: this.props.filename,\n        file: this.props.file,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, React.createElement(ShortcutDownloadPreviewButton, {\n        filename: this.props.filename,\n        filesize: Buffer.byteLength(this.props.file),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      })) : React.createElement(DownloadStatusSwitcher, {\n        status: this.state,\n        requestUpload: function requestUpload() {\n          return _this2.uploadFile();\n        },\n        detailsMsg: React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110\n          },\n          __self: this\n        }, \"To download on this browser, ScPL editor will upload your shortcut to\", \" \", React.createElement(\"a\", {\n          href: \"https://file.io\",\n          target: \"_blank\",\n          rel: \"noopener\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114\n          },\n          __self: this\n        }, \"file.io\"), \".\"),\n        uploadAction: \"Create Download Link\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        target: \"_blank\",\n        rel: \"noopener noreferrer\",\n        href: this.state.uploadedURL,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, React.createElement(ShortcutDownloadPreviewButton, {\n        filename: this.props.filename,\n        filesize: Buffer.byteLength(this.props.file),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      })))), React.createElement(\"div\", {\n        className: \"download-or\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, \"or\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, React.createElement(DownloadStatusSwitcher, {\n        status: this.state,\n        requestUpload: function requestUpload() {\n          return _this2.uploadFile();\n        },\n        detailsMsg: React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 149\n          },\n          __self: this\n        }, \"To generate a QR code, ScPL editor will upload your shortcut to\", \" \", React.createElement(\"a\", {\n          href: \"https://file.io\",\n          target: \"_blank\",\n          rel: \"noopener\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 152\n          },\n          __self: this\n        }, \"file.io\"), \".\"),\n        uploadAction: \"Generate QR Code\",\n        additionalButtonClasses: \"qr-btn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        style: {\n          display: \"none\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, \"Add to your library via QR Code:\"), React.createElement(\"div\", {\n        id: \"qr-result\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"qrresimg\",\n        style: {\n          backgroundImage: \"url(\".concat(this.state.qrcode, \")\")\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      })), React.createElement(\"p\", {\n        className: \"details-text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, \"Open your Camera app and point it steady for 2-3 seconds at this QR Code.\"))))) : React.createElement(\"div\", {\n        id: \"no-file-msg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, \"Your code seems to have some errors.\")), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"btn large-btn\",\n        id: \"close-download\",\n        onClick: function onClick() {\n          return _this2.props.onCancel();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }, \"Done\")));\n    }\n  }]);\n\n  return DownloadModal;\n}(Component);","map":{"version":3,"sources":["/Users/brandonjordan/Documents/GitHub/scpl-editor/src/DownloadModal.tsx"],"names":["React","Component","QRCode","ModalContainer","DownloadButton","prettyBytes","shortcutDownloadPreviewIcon","uploadShortcut","DownloadStatusSwitcher","ShortcutDownloadPreviewButton","props","filename","filesize","DownloadModal","state","uploadStatus","nextProps","file","setState","uploadError","uploadResult","result","message","toDataURL","url","qrcode","uploadedURL","onCancel","display","e","stopPropagation","HTMLAnchorElement","prototype","Buffer","byteLength","uploadFile","backgroundImage"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\n\nimport * as QRCode from \"qrcode\";\n\nimport { ModalContainer } from \"./ModalContainer\";\nimport { DownloadButton } from \"./DownloadButton\";\n\nimport prettyBytes from \"pretty-bytes\";\n\nimport shortcutDownloadPreviewIcon from \"./img/shortcut-file.png\";\nimport { uploadShortcut } from \"./Uploader\";\nimport { DownloadStatusSwitcher, UploadStatus } from \"./DownloadStatusSwitcher\";\n\nimport \"./CreateEditShortcut.css\";\n\nexport class ShortcutDownloadPreviewButton extends Component<\n\t{ filename: string; filesize: number },\n\t{}\n> {\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<img src={shortcutDownloadPreviewIcon} width={130} />\n\t\t\t\t<div className=\"shortcut-filename\">{this.props.filename}</div>\n\t\t\t\t<div className=\"shortcut-filedetails\">\n\t\t\t\t\t{prettyBytes(this.props.filesize)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\ntype DownloadModalProps = {\n\tonCancel: () => void;\n\tfilename: string;\n\tfile: Buffer | undefined;\n};\n\nexport class DownloadModal extends Component<DownloadModalProps, UploadStatus> {\n\tconstructor(props: Readonly<DownloadModalProps>) {\n\t\tsuper(props);\n\t\tthis.state = { uploadStatus: \"None\" };\n\t}\n\tcomponentWillReceiveProps(nextProps: Readonly<DownloadModalProps>) {\n\t\tif (nextProps.file !== this.props.file) {\n\t\t\tthis.setState({ uploadStatus: \"None\" });\n\t\t}\n\t}\n\tasync uploadFile() {\n\t\tif (!this.props.file) {\n\t\t\tthis.setState({\n\t\t\t\tuploadStatus: \"Error\",\n\t\t\t\tuploadError: \"No file. Make sure your shortcut has no errors.\"\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tthis.setState({\n\t\t\tuploadStatus: \"Uploading\"\n\t\t});\n\t\tconst uploadResult = await uploadShortcut(\n\t\t\tthis.props.file,\n\t\t\tthis.props.filename\n\t\t);\n\t\tif (uploadResult.result === \"error\") {\n\t\t\tthis.setState({\n\t\t\t\tuploadStatus: \"Error\",\n\t\t\t\tuploadError: uploadResult.message\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tconst qrcode = await QRCode.toDataURL(uploadResult.url);\n\t\tthis.setState({\n\t\t\tuploadStatus: \"URL\",\n\t\t\tuploadedURL: uploadResult.url,\n\t\t\tqrcode: qrcode\n\t\t});\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<ModalContainer onCancel={() => this.props.onCancel()}>\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"modal\"\n\t\t\t\t\tid=\"download-result\"\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tdisplay: \"block\"\n\t\t\t\t\t}}\n\t\t\t\t\tonClick={e => e.stopPropagation()}\n\t\t\t\t>\n\t\t\t\t\t<h2>Export Shortcut File</h2>\n\t\t\t\t\t{this.props.file ? (\n\t\t\t\t\t\t<div className=\"download-grid\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{\"download\" in HTMLAnchorElement.prototype ? (\n\t\t\t\t\t\t\t\t\t<DownloadButton\n\t\t\t\t\t\t\t\t\t\tfilename={this.props.filename}\n\t\t\t\t\t\t\t\t\t\tfile={this.props.file}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<ShortcutDownloadPreviewButton\n\t\t\t\t\t\t\t\t\t\t\tfilename={this.props.filename}\n\t\t\t\t\t\t\t\t\t\t\tfilesize={Buffer.byteLength(\n\t\t\t\t\t\t\t\t\t\t\t\tthis.props.file\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</DownloadButton>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<DownloadStatusSwitcher\n\t\t\t\t\t\t\t\t\t\tstatus={this.state}\n\t\t\t\t\t\t\t\t\t\trequestUpload={() => this.uploadFile()}\n\t\t\t\t\t\t\t\t\t\tdetailsMsg={\n\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\tTo download on this browser,\n\t\t\t\t\t\t\t\t\t\t\t\tScPL editor will upload your\n\t\t\t\t\t\t\t\t\t\t\t\tshortcut to{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\t\thref=\"https://file.io\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\t\t\t\t\trel=\"noopener\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\tfile.io\n\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t.\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tuploadAction=\"Create Download Link\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\t\t\t\t\t\t\t\thref={\n\t\t\t\t\t\t\t\t\t\t\t\t(this.state as any).uploadedURL\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<ShortcutDownloadPreviewButton\n\t\t\t\t\t\t\t\t\t\t\t\tfilename={this.props.filename}\n\t\t\t\t\t\t\t\t\t\t\t\tfilesize={Buffer.byteLength(\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.props.file\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</DownloadStatusSwitcher>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"download-or\">or</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<DownloadStatusSwitcher\n\t\t\t\t\t\t\t\t\tstatus={this.state}\n\t\t\t\t\t\t\t\t\trequestUpload={() => this.uploadFile()}\n\t\t\t\t\t\t\t\t\tdetailsMsg={\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\tTo generate a QR code, ScPL editor\n\t\t\t\t\t\t\t\t\t\t\twill upload your shortcut to{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\thref=\"https://file.io\"\n\t\t\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\t\t\t\trel=\"noopener\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tfile.io\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t.\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tuploadAction=\"Generate QR Code\"\n\t\t\t\t\t\t\t\t\tadditionalButtonClasses=\"qr-btn\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<p style={{ display: \"none\" }}>\n\t\t\t\t\t\t\t\t\t\t\tAdd to your library via QR Code:\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t<div id=\"qr-result\">\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"qrresimg\"\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\t\tbackgroundImage: `url(${\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(this.state as any)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.qrcode\n\t\t\t\t\t\t\t\t\t\t\t\t\t})`\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<p className=\"details-text\">\n\t\t\t\t\t\t\t\t\t\t\tOpen your Camera app and point it\n\t\t\t\t\t\t\t\t\t\t\tsteady for 2-3 seconds at this QR\n\t\t\t\t\t\t\t\t\t\t\tCode.\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</DownloadStatusSwitcher>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div id=\"no-file-msg\">\n\t\t\t\t\t\t\t<p>Your code seems to have some errors.</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t<br />\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"btn large-btn\"\n\t\t\t\t\t\tid=\"close-download\"\n\t\t\t\t\t\tonClick={() => this.props.onCancel()}\n\t\t\t\t\t>\n\t\t\t\t\t\tDone\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</ModalContainer>\n\t\t);\n\t}\n}\n"]},"metadata":{},"sourceType":"module"}