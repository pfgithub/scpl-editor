{"ast":null,"code":"import _classCallCheck from \"/Users/brandonjordan/Documents/GitHub/scpl-editor/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/brandonjordan/Documents/GitHub/scpl-editor/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/brandonjordan/Documents/GitHub/scpl-editor/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/brandonjordan/Documents/GitHub/scpl-editor/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/brandonjordan/Documents/GitHub/scpl-editor/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/brandonjordan/Documents/GitHub/scpl-editor/src/DownloadButton.tsx\";\nimport React, { Component } from \"react\";\nexport var DownloadButton =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(DownloadButton, _Component);\n\n  function DownloadButton() {\n    _classCallCheck(this, DownloadButton);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(DownloadButton).apply(this, arguments));\n  }\n\n  _createClass(DownloadButton, [{\n    key: \"render\",\n    // from https://github.com/axetroy/react-download\n    value: function render() {\n      var _this = this;\n\n      return React.createElement(\"a\", {\n        href: \"javascript:;\",\n        id: \"download-shortcut-link\",\n        onClick: function onClick(e) {\n          return _this.onClick(e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 10\n        },\n        __self: this\n      }, this.props.children);\n    }\n  }, {\n    key: \"fakeClick\",\n    value: function fakeClick(obj) {\n      var ev = document.createEvent(\"MouseEvents\");\n      ev.initMouseEvent(\"click\", true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n      obj.dispatchEvent(ev);\n    }\n  }, {\n    key: \"exportRaw\",\n    value: function exportRaw(name, data) {\n      var urlObject = window.URL || window.webkitURL || window;\n      var export_blob = new Blob([data]);\n\n      if (\"msSaveBlob\" in navigator) {\n        // Prefer msSaveBlob if available - Edge supports a[download] but\n        // ignores the filename provided, using the blob UUID instead.\n        // msSaveBlob will respect the provided filename\n        navigator.msSaveBlob(export_blob, name);\n      } else if (\"download\" in HTMLAnchorElement.prototype) {\n        var save_link = document.createElementNS(\"http://www.w3.org/1999/xhtml\", \"a\");\n        save_link.href = urlObject.createObjectURL(export_blob);\n        save_link.download = name;\n        this.fakeClick(save_link);\n      } else {\n        alert(\"Downloading shortcuts is not available on this browser yet :(\\nIt should be implemented within a few days from a few days from a while from now.\");\n      }\n    }\n  }, {\n    key: \"onClick\",\n    value: function onClick(_e) {\n      if (!this.props.file) {\n        return;\n      }\n\n      this.exportRaw(this.props.filename, this.props.file);\n    }\n  }]);\n\n  return DownloadButton;\n}(Component);","map":{"version":3,"sources":["/Users/brandonjordan/Documents/GitHub/scpl-editor/src/DownloadButton.tsx"],"names":["React","Component","DownloadButton","e","onClick","props","children","obj","ev","document","createEvent","initMouseEvent","window","dispatchEvent","name","data","urlObject","URL","webkitURL","export_blob","Blob","navigator","msSaveBlob","HTMLAnchorElement","prototype","save_link","createElementNS","href","createObjectURL","download","fakeClick","alert","_e","file","exportRaw","filename"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AAEA,WAAaC,cAAb;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAIC;AAJD,6BAKU;AAAA;;AACR,aACC;AACC,QAAA,IAAI,EAAC,cADN;AAEC,QAAA,EAAE,EAAC,wBAFJ;AAGC,QAAA,OAAO,EAAE,iBAAAC,CAAC;AAAA,iBAAI,KAAI,CAACC,OAAL,CAAaD,CAAb,CAAJ;AAAA,SAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAKE,KAAKE,KAAL,CAAWC,QALb,CADD;AASA;AAfF;AAAA;AAAA,8BAgBWC,GAhBX,EAgBmC;AACjC,UAAMC,EAAE,GAAGC,QAAQ,CAACC,WAAT,CAAqB,aAArB,CAAX;AACAF,MAAAA,EAAE,CAACG,cAAH,CACC,OADD,EAEC,IAFD,EAGC,KAHD,EAICC,MAJD,EAKC,CALD,EAMC,CAND,EAOC,CAPD,EAQC,CARD,EASC,CATD,EAUC,KAVD,EAWC,KAXD,EAYC,KAZD,EAaC,KAbD,EAcC,CAdD,EAeC,IAfD;AAiBAL,MAAAA,GAAG,CAACM,aAAJ,CAAkBL,EAAlB;AACA;AApCF;AAAA;AAAA,8BAqCWM,IArCX,EAqCyBC,IArCzB,EAqCuC;AACrC,UAAMC,SAAS,GAAGJ,MAAM,CAACK,GAAP,IAAeL,MAAD,CAAgBM,SAA9B,IAA2CN,MAA7D;AACA,UAAMO,WAAW,GAAG,IAAIC,IAAJ,CAAS,CAACL,IAAD,CAAT,CAApB;;AAEA,UAAI,gBAAgBM,SAApB,EAA+B;AAC9B;AACA;AACA;AACAA,QAAAA,SAAS,CAACC,UAAV,CAAqBH,WAArB,EAAkCL,IAAlC;AACA,OALD,MAKO,IAAI,cAAcS,iBAAiB,CAACC,SAApC,EAA+C;AACrD,YAAMC,SAAS,GAAGhB,QAAQ,CAACiB,eAAT,CACjB,8BADiB,EAEjB,GAFiB,CAAlB;AAIAD,QAAAA,SAAS,CAACE,IAAV,GAAiBX,SAAS,CAACY,eAAV,CAA0BT,WAA1B,CAAjB;AACAM,QAAAA,SAAS,CAACI,QAAV,GAAqBf,IAArB;AACA,aAAKgB,SAAL,CAAeL,SAAf;AACA,OARM,MAQA;AACNM,QAAAA,KAAK,CACJ,kJADI,CAAL;AAGA;AACD;AA3DF;AAAA;AAAA,4BA4DSC,EA5DT,EA4D8D;AAC5D,UAAI,CAAC,KAAK3B,KAAL,CAAW4B,IAAhB,EAAsB;AACrB;AACA;;AACD,WAAKC,SAAL,CAAe,KAAK7B,KAAL,CAAW8B,QAA1B,EAAoC,KAAK9B,KAAL,CAAW4B,IAA/C;AACA;AAjEF;;AAAA;AAAA,EAAoChC,SAApC","sourcesContent":["import React, { Component } from \"react\";\n\nexport class DownloadButton extends Component<\n\t{ filename: string; file: Buffer | undefined },\n\t{}\n> {\n\t// from https://github.com/axetroy/react-download\n\trender() {\n\t\treturn (\n\t\t\t<a\n\t\t\t\thref=\"javascript:;\"\n\t\t\t\tid=\"download-shortcut-link\"\n\t\t\t\tonClick={e => this.onClick(e)}\n\t\t\t>\n\t\t\t\t{this.props.children}\n\t\t\t</a>\n\t\t);\n\t}\n\tfakeClick(obj: HTMLAnchorElement) {\n\t\tconst ev = document.createEvent(\"MouseEvents\");\n\t\tev.initMouseEvent(\n\t\t\t\"click\",\n\t\t\ttrue,\n\t\t\tfalse,\n\t\t\twindow,\n\t\t\t0,\n\t\t\t0,\n\t\t\t0,\n\t\t\t0,\n\t\t\t0,\n\t\t\tfalse,\n\t\t\tfalse,\n\t\t\tfalse,\n\t\t\tfalse,\n\t\t\t0,\n\t\t\tnull\n\t\t);\n\t\tobj.dispatchEvent(ev);\n\t}\n\texportRaw(name: string, data: Buffer) {\n\t\tconst urlObject = window.URL || (window as any).webkitURL || window;\n\t\tconst export_blob = new Blob([data]);\n\n\t\tif (\"msSaveBlob\" in navigator) {\n\t\t\t// Prefer msSaveBlob if available - Edge supports a[download] but\n\t\t\t// ignores the filename provided, using the blob UUID instead.\n\t\t\t// msSaveBlob will respect the provided filename\n\t\t\tnavigator.msSaveBlob(export_blob, name);\n\t\t} else if (\"download\" in HTMLAnchorElement.prototype) {\n\t\t\tconst save_link = document.createElementNS(\n\t\t\t\t\"http://www.w3.org/1999/xhtml\",\n\t\t\t\t\"a\"\n\t\t\t) as HTMLAnchorElement;\n\t\t\tsave_link.href = urlObject.createObjectURL(export_blob);\n\t\t\tsave_link.download = name;\n\t\t\tthis.fakeClick(save_link);\n\t\t} else {\n\t\t\talert(\n\t\t\t\t\"Downloading shortcuts is not available on this browser yet :(\\nIt should be implemented within a few days from a few days from a while from now.\"\n\t\t\t);\n\t\t}\n\t}\n\tonClick(_e: React.MouseEvent<HTMLAnchorElement, MouseEvent>) {\n\t\tif (!this.props.file) {\n\t\t\treturn;\n\t\t}\n\t\tthis.exportRaw(this.props.filename, this.props.file);\n\t}\n}\n"]},"metadata":{},"sourceType":"module"}