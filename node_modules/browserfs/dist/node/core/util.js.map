{"version":3,"file":"util.js","sourceRoot":"","sources":["../../../src/core/util.ts"],"names":[],"mappings":";AAIA,yCAAgD;AAChD,6CAAwC;AACxC,2BAA6B;AAE7B,4BAAmC,KAAc,EAAE,MAAc,EAAE,IAAS;IAC1E,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;QACV,OAAO,CAAC,IAAI,CAAC,MAAI,MAAM,kJAA6I,MAAM,gBAAW,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,qGAAkG,CAAC,CAAC;IAC/S,CAAC;AACH,CAAC;AAJD,gDAIC;AAED;;;;GAIG;AACU,QAAA,IAAI,GAAY,OAAO,SAAS,KAAK,WAAW,IAAI,CAAC,CAAC,CAAC,iBAAiB,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,WAAW,EAAE,CAAC,IAAI,SAAS,CAAC,SAAS,CAAC,OAAO,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;AAEhL;;;GAGG;AACU,QAAA,WAAW,GAAY,OAAO,MAAM,KAAK,WAAW,CAAC;AAUlE;;;GAGG;AACH;IACE,MAAM,IAAI,KAAK,CAAC,6DAA6D,CAAC,CAAC;AACjF,CAAC;AAFD,oBAEC;AAED;;;GAGG;AACH,oBAA2B,CAAS,EAAE,IAAY,EAAE,EAAc;IAChE,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACtB,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,IAAI,EAAE,EAAE,CAAC,CAAC;QACtC,EAAE,CAAC,SAAS,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;IACxB,CAAC;AACH,CAAC;AALD,gCAKC;AAED;;;;GAIG;AACH,4BAAmC,IAAY;IAC7C,IAAM,EAAE,GAAG,iBAAiB,CAAC,IAAI,CAAC,EAChC,QAAQ,GAAG,EAAE,CAAC,UAAU,EACxB,KAAK,GAAG,EAAE,CAAC,UAAU,CAAC;IACxB,EAAE,CAAC,CAAC,QAAQ,KAAK,CAAC,IAAI,KAAK,KAAK,EAAE,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,CAAC;QACrD,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC;IACnB,CAAC;IAAC,IAAI,CAAC,CAAC;QACN,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC,QAAQ,EAAE,QAAQ,GAAG,KAAK,CAAC,CAAC;IACrD,CAAC;AACH,CAAC;AATD,gDASC;AAED;;;;GAIG;AACH,2BAAkC,IAAY;IAC5C,EAAE,CAAC,CAAC,IAAI,YAAY,UAAU,CAAC,CAAC,CAAC;QAC/B,6CAA6C;QAC7C,MAAM,CAAO,IAAI,CAAC;IACpB,CAAC;IAAC,IAAI,CAAC,CAAC;QACN,wDAAwD;QACxD,mDAAmD;QACnD,MAAM,CAAC,IAAI,UAAU,CAAC,IAAI,CAAC,CAAC;IAC9B,CAAC;AACH,CAAC;AATD,8CASC;AAED;;;;GAIG;AACH,yBAAgC,GAAqB;IACnD,EAAE,CAAC,CAAC,GAAG,YAAY,MAAM,CAAC,CAAC,CAAC;QAC1B,MAAM,CAAC,GAAG,CAAC;IACb,CAAC;IAAC,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,YAAY,UAAU,CAAC,CAAC,CAAC;QACrC,MAAM,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC;IAChC,CAAC;IAAC,IAAI,CAAC,CAAC;QACN,MAAM,CAAC,MAAM,CAAC,IAAI,CAAY,GAAG,CAAC,CAAC;IACrC,CAAC;AACH,CAAC;AARD,0CAQC;AAED;;;GAGG;AACH,2BAAkC,EAAc;IAC9C,EAAE,CAAC,CAAC,EAAE,YAAY,MAAM,CAAC,CAAC,CAAC;QACzB,MAAM,CAAC,EAAE,CAAC;IACZ,CAAC;IAAC,IAAI,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,UAAU,KAAK,CAAC,IAAI,EAAE,CAAC,UAAU,KAAK,EAAE,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,CAAC;QACzE,MAAM,CAAC,kBAAkB,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC;IACvC,CAAC;IAAC,IAAI,CAAC,CAAC;QACN,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,MAAM,EAAE,EAAE,CAAC,UAAU,EAAE,EAAE,CAAC,UAAU,CAAC,CAAC;IAC9D,CAAC;AACH,CAAC;AARD,8CAQC;AAED;;;;GAIG;AACH,4BAAmC,EAAe;IAChD,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;AACzB,CAAC;AAFD,gDAEC;AAED;;;GAGG;AACH,sBAA6B,IAAY,EAAE,KAAiB,EAAE,GAAiB;IAApC,sBAAA,EAAA,SAAiB;IAAE,oBAAA,EAAA,MAAM,IAAI,CAAC,MAAM;IAC7E,EAAE,CAAC,CAAC,KAAK,GAAG,CAAC,IAAI,GAAG,GAAG,CAAC,IAAI,GAAG,GAAG,IAAI,CAAC,MAAM,IAAI,KAAK,GAAG,GAAG,CAAC,CAAC,CAAC;QAC7D,MAAM,IAAI,SAAS,CAAC,8CAA4C,IAAI,CAAC,MAAM,WAAM,KAAK,UAAK,GAAG,MAAG,CAAC,CAAC;IACrG,CAAC;IACD,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;QACtB,4CAA4C;QAC5C,MAAM,CAAC,WAAW,EAAE,CAAC;IACvB,CAAC;IAAC,IAAI,CAAC,CAAC;QACN,IAAM,EAAE,GAAG,iBAAiB,CAAC,IAAI,CAAC,EAChC,EAAE,GAAG,IAAI,CAAC,CAAC,CAAC,EACZ,KAAK,GAAG,CAAC,EAAE,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC;QAE1B,IAAI,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC;QAChB,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,KAAK,CAAC,CAAC,CAAC;YACpB,8BAA8B;YAC9B,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;YACX,MAAM,CAAC,iBAAiB,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC,CAAC;QACjD,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,UAAU;YACV,IAAI,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;YACb,MAAM,CAAC,iBAAiB,CAAC,EAAE,CAAC,QAAQ,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC,CAAC;QACpD,CAAC;IACH,CAAC;AACH,CAAC;AAvBD,oCAuBC;AAED;;GAEG;AACH,IAAI,SAAS,GAAkB,IAAI,CAAC;AACpC;;;GAGG;AACH;IACE,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;QACd,MAAM,CAAC,SAAS,CAAC;IACnB,CAAC;IACD,MAAM,CAAC,SAAS,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;AACrC,CAAC;AALD,kCAKC;AAED;;;GAGG;AACH,yBAAgC,CAAS,EAAE,EAAqB;IAC9D,EAAE,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACvB,EAAE,EAAE,CAAC;IACP,CAAC;IAAC,IAAI,CAAC,CAAC;QACN,EAAE,CAAC,IAAI,oBAAQ,CAAC,qBAAS,CAAC,MAAM,EAAE,0BAA0B,CAAC,CAAC,CAAC;IACjE,CAAC;AACH,CAAC;AAND,0CAMC;AAED;;;GAGG;AACH,sBAA6B,MAA6B,EAAE,IAAS,EAAE,EAAqB;IAC1F,IAAM,QAAQ,GAAG,MAAM,CAAC,OAAO,CAAC;IAChC,IAAM,MAAM,GAAG,MAAM,CAAC,IAAI,CAAC;IAE3B,IAAI,iBAAiB,GAAG,CAAC,CAAC;IAC1B,IAAI,cAAc,GAAG,KAAK,CAAC;IAC3B,IAAI,SAAS,GAAG,KAAK,CAAC;IACtB,2BAA2B,CAAY;QACrC,EAAE,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC;YACpB,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBACN,cAAc,GAAG,IAAI,CAAC;gBACtB,EAAE,CAAC,CAAC,CAAC,CAAC;YACR,CAAC;YACD,iBAAiB,EAAE,CAAC;YACpB,EAAE,CAAC,CAAC,iBAAiB,KAAK,CAAC,IAAI,SAAS,CAAC,CAAC,CAAC;gBACzC,EAAE,EAAE,CAAC;YACP,CAAC;QACH,CAAC;IACH,CAAC;4BAGU,OAAO;QAChB,EAAE,CAAC,CAAC,QAAQ,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;YACrC,IAAM,GAAG,GAAG,QAAQ,CAAC,OAAO,CAAC,CAAC;YAC9B,IAAM,aAAa,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC;YAEpC,EAAE,CAAC,CAAC,aAAa,KAAK,SAAS,IAAI,aAAa,KAAK,IAAI,CAAC,CAAC,CAAC;gBAC1D,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC;oBAClB,iCAAiC;oBACjC,4EAA4E;oBAC5E,8BAA8B;oBAC9B,IAAM,gBAAgB,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,UAAC,CAAC,IAAK,OAAA,CAAC,CAAC,CAAC,IAAI,QAAQ,CAAC,EAAhB,CAAgB,CAAC,CAAC,GAAG,CAAC,UAAC,CAAS;wBACvF,MAAM,CAAC,EAAC,GAAG,EAAE,CAAC,EAAE,QAAQ,EAAE,wBAAW,CAAC,OAAO,EAAE,CAAC,CAAC,EAAC,CAAC;oBACrD,CAAC,CAAC,CAAC,MAAM,CAAC,UAAC,CAAC,IAAK,OAAA,CAAC,CAAC,QAAQ,GAAG,CAAC,EAAd,CAAc,CAAC,CAAC,IAAI,CAAC,UAAC,CAAC,EAAE,CAAC,IAAK,OAAA,CAAC,CAAC,QAAQ,GAAG,CAAC,CAAC,QAAQ,EAAvB,CAAuB,CAAC,CAAC;oBACzE,iCAAiC;oBACjC,EAAE,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC;;oBAErB,CAAC;oBACD,cAAc,GAAG,IAAI,CAAC;oCACf,EAAE,CAAC,IAAI,oBAAQ,CAAC,qBAAS,CAAC,MAAM,EAAE,MAAI,MAAM,2BAAsB,OAAO,wBAAkB,gBAAgB,CAAC,MAAM,GAAG,CAAC,GAAG,wCAAsC,gBAAgB,CAAC,CAAC,CAAC,CAAC,GAAG,sCAAiC,OAAO,OAAI,GAAG,EAAE,+BAAyB,GAAG,CAAC,WAAa,CAAC,CAAC;gBAC5R,CAAC;gBACD,mDAAmD;YACrD,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,+BAA+B;gBAC/B,IAAI,WAAW,GAAG,KAAK,CAAC;gBACxB,EAAE,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;oBAC5B,WAAW,GAAG,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,OAAM,CAAC,aAAa,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;gBAC/D,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,WAAW,GAAG,OAAM,CAAC,aAAa,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC;gBACnD,CAAC;gBACD,EAAE,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC;oBACjB,iCAAiC;oBACjC,EAAE,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC;;oBAErB,CAAC;oBACD,cAAc,GAAG,IAAI,CAAC;oCACf,EAAE,CAAC,IAAI,oBAAQ,CAAC,qBAAS,CAAC,MAAM,EAAE,MAAI,MAAM,oCAA+B,OAAO,2CAAqC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,aAAW,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAG,GAAG,GAAG,CAAC,IAAI,wBAAkB,OAAM,CAAC,aAAa,CAAC,8BAAyB,GAAG,CAAC,WAAa,CAAC,CAAC;gBACzR,CAAC;gBAAC,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC;oBACzB,iBAAiB,EAAE,CAAC;oBACpB,GAAG,CAAC,SAAS,CAAC,aAAa,EAAE,iBAAiB,CAAC,CAAC;gBAClD,CAAC;gBACD,uBAAuB;YACzB,CAAC;QACH,CAAC;IACH,CAAC;IA5CD,8BAA8B;IAC9B,GAAG,CAAC,CAAC,IAAM,OAAO,IAAI,QAAQ,CAAC;8BAApB,OAAO;;;KA2CjB;IACD,SAAS,GAAG,IAAI,CAAC;IACjB,EAAE,CAAC,CAAC,iBAAiB,KAAK,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC;QAC/C,EAAE,EAAE,CAAC;IACP,CAAC;AACH,CAAC;AArED,oCAqEC","sourcesContent":["/**\n * Grab bag of utility functions used across the code.\n */\nimport {FileSystem, BFSOneArgCallback, FileSystemConstructor} from './file_system';\nimport {ErrorCode, ApiError} from './api_error';\nimport levenshtein from './levenshtein';\nimport * as path from 'path';\n\nexport function deprecationMessage(print: boolean, fsName: string, opts: any): void {\n  if (print) {\n    console.warn(`[${fsName}] Direct file system constructor usage is deprecated for this file system, and will be removed in the next major version. Please use the '${fsName}.Create(${JSON.stringify(opts)}, callback)' method instead. See https://github.com/jvilk/BrowserFS/issues/176 for more details.`);\n  }\n}\n\n/**\n * Checks for any IE version, including IE11 which removed MSIE from the\n * userAgent string.\n * @hidden\n */\nexport const isIE: boolean = typeof navigator !== \"undefined\" && !!(/(msie) ([\\w.]+)/.exec(navigator.userAgent.toLowerCase()) || navigator.userAgent.indexOf('Trident') !== -1);\n\n/**\n * Check if we're in a web worker.\n * @hidden\n */\nexport const isWebWorker: boolean = typeof window === \"undefined\";\n\n/**\n * @hidden\n */\nexport interface Arrayish<T> {\n  [idx: number]: T;\n  length: number;\n}\n\n/**\n * Throws an exception. Called on code paths that should be impossible.\n * @hidden\n */\nexport function fail() {\n  throw new Error(\"BFS has reached an impossible code path; please file a bug.\");\n}\n\n/**\n * Synchronous recursive makedir.\n * @hidden\n */\nexport function mkdirpSync(p: string, mode: number, fs: FileSystem): void {\n  if (!fs.existsSync(p)) {\n    mkdirpSync(path.dirname(p), mode, fs);\n    fs.mkdirSync(p, mode);\n  }\n}\n\n/**\n * Converts a buffer into an array buffer. Attempts to do so in a\n * zero-copy manner, e.g. the array references the same memory.\n * @hidden\n */\nexport function buffer2ArrayBuffer(buff: Buffer): ArrayBuffer {\n  const u8 = buffer2Uint8array(buff),\n    u8offset = u8.byteOffset,\n    u8Len = u8.byteLength;\n  if (u8offset === 0 && u8Len === u8.buffer.byteLength) {\n    return u8.buffer;\n  } else {\n    return u8.buffer.slice(u8offset, u8offset + u8Len);\n  }\n}\n\n/**\n * Converts a buffer into a Uint8Array. Attempts to do so in a\n * zero-copy manner, e.g. the array references the same memory.\n * @hidden\n */\nexport function buffer2Uint8array(buff: Buffer): Uint8Array {\n  if (buff instanceof Uint8Array) {\n    // BFS & Node v4.0 buffers *are* Uint8Arrays.\n    return <any> buff;\n  } else {\n    // Uint8Arrays can be constructed from arrayish numbers.\n    // At this point, we assume this isn't a BFS array.\n    return new Uint8Array(buff);\n  }\n}\n\n/**\n * Converts the given arrayish object into a Buffer. Attempts to\n * be zero-copy.\n * @hidden\n */\nexport function arrayish2Buffer(arr: Arrayish<number>): Buffer {\n  if (arr instanceof Buffer) {\n    return arr;\n  } else if (arr instanceof Uint8Array) {\n    return uint8Array2Buffer(arr);\n  } else {\n    return Buffer.from(<number[]> arr);\n  }\n}\n\n/**\n * Converts the given Uint8Array into a Buffer. Attempts to be zero-copy.\n * @hidden\n */\nexport function uint8Array2Buffer(u8: Uint8Array): Buffer {\n  if (u8 instanceof Buffer) {\n    return u8;\n  } else if (u8.byteOffset === 0 && u8.byteLength === u8.buffer.byteLength) {\n    return arrayBuffer2Buffer(u8.buffer);\n  } else {\n    return Buffer.from(u8.buffer, u8.byteOffset, u8.byteLength);\n  }\n}\n\n/**\n * Converts the given array buffer into a Buffer. Attempts to be\n * zero-copy.\n * @hidden\n */\nexport function arrayBuffer2Buffer(ab: ArrayBuffer): Buffer {\n  return Buffer.from(ab);\n}\n\n/**\n * Copies a slice of the given buffer\n * @hidden\n */\nexport function copyingSlice(buff: Buffer, start: number = 0, end = buff.length): Buffer {\n  if (start < 0 || end < 0 || end > buff.length || start > end) {\n    throw new TypeError(`Invalid slice bounds on buffer of length ${buff.length}: [${start}, ${end}]`);\n  }\n  if (buff.length === 0) {\n    // Avoid s0 corner case in ArrayBuffer case.\n    return emptyBuffer();\n  } else {\n    const u8 = buffer2Uint8array(buff),\n      s0 = buff[0],\n      newS0 = (s0 + 1) % 0xFF;\n\n    buff[0] = newS0;\n    if (u8[0] === newS0) {\n      // Same memory. Revert & copy.\n      u8[0] = s0;\n      return uint8Array2Buffer(u8.slice(start, end));\n    } else {\n      // Revert.\n      buff[0] = s0;\n      return uint8Array2Buffer(u8.subarray(start, end));\n    }\n  }\n}\n\n/**\n * @hidden\n */\nlet emptyBuff: Buffer | null = null;\n/**\n * Returns an empty buffer.\n * @hidden\n */\nexport function emptyBuffer(): Buffer {\n  if (emptyBuff) {\n    return emptyBuff;\n  }\n  return emptyBuff = Buffer.alloc(0);\n}\n\n/**\n * Option validator for a Buffer file system option.\n * @hidden\n */\nexport function bufferValidator(v: object, cb: BFSOneArgCallback): void {\n  if (Buffer.isBuffer(v)) {\n    cb();\n  } else {\n    cb(new ApiError(ErrorCode.EINVAL, `option must be a Buffer.`));\n  }\n}\n\n/**\n * Checks that the given options object is valid for the file system options.\n * @hidden\n */\nexport function checkOptions(fsType: FileSystemConstructor, opts: any, cb: BFSOneArgCallback): void {\n  const optsInfo = fsType.Options;\n  const fsName = fsType.Name;\n\n  let pendingValidators = 0;\n  let callbackCalled = false;\n  let loopEnded = false;\n  function validatorCallback(e?: ApiError): void {\n    if (!callbackCalled) {\n      if (e) {\n        callbackCalled = true;\n        cb(e);\n      }\n      pendingValidators--;\n      if (pendingValidators === 0 && loopEnded) {\n        cb();\n      }\n    }\n  }\n\n  // Check for required options.\n  for (const optName in optsInfo) {\n    if (optsInfo.hasOwnProperty(optName)) {\n      const opt = optsInfo[optName];\n      const providedValue = opts[optName];\n\n      if (providedValue === undefined || providedValue === null) {\n        if (!opt.optional) {\n          // Required option, not provided.\n          // Any incorrect options provided? Which ones are close to the provided one?\n          // (edit distance 5 === close)\n          const incorrectOptions = Object.keys(opts).filter((o) => !(o in optsInfo)).map((a: string) => {\n            return {str: a, distance: levenshtein(optName, a)};\n          }).filter((o) => o.distance < 5).sort((a, b) => a.distance - b.distance);\n          // Validators may be synchronous.\n          if (callbackCalled) {\n            return;\n          }\n          callbackCalled = true;\n          return cb(new ApiError(ErrorCode.EINVAL, `[${fsName}] Required option '${optName}' not provided.${incorrectOptions.length > 0 ? ` You provided unrecognized option '${incorrectOptions[0].str}'; perhaps you meant to type '${optName}'.` : ''}\\nOption description: ${opt.description}`));\n        }\n        // Else: Optional option, not provided. That is OK.\n      } else {\n        // Option provided! Check type.\n        let typeMatches = false;\n        if (Array.isArray(opt.type)) {\n          typeMatches = opt.type.indexOf(typeof(providedValue)) !== -1;\n        } else {\n          typeMatches = typeof(providedValue) === opt.type;\n        }\n        if (!typeMatches) {\n          // Validators may be synchronous.\n          if (callbackCalled) {\n            return;\n          }\n          callbackCalled = true;\n          return cb(new ApiError(ErrorCode.EINVAL, `[${fsName}] Value provided for option ${optName} is not the proper type. Expected ${Array.isArray(opt.type) ? `one of {${opt.type.join(\", \")}}` : opt.type}, but received ${typeof(providedValue)}\\nOption description: ${opt.description}`));\n        } else if (opt.validator) {\n          pendingValidators++;\n          opt.validator(providedValue, validatorCallback);\n        }\n        // Otherwise: All good!\n      }\n    }\n  }\n  loopEnded = true;\n  if (pendingValidators === 0 && !callbackCalled) {\n    cb();\n  }\n}\n"]}