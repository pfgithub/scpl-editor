{"ast":null,"code":"\"use strict\";\n\nvar _slicedToArray = require(\"/Users/brandonjordan/Documents/GitHub/scpl-editor/node_modules/@babel/runtime/helpers/slicedToArray\");\n\nvar _createClass = require(\"/Users/brandonjordan/Documents/GitHub/scpl-editor/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _classCallCheck = require(\"/Users/brandonjordan/Documents/GitHub/scpl-editor/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _possibleConstructorReturn = require(\"/Users/brandonjordan/Documents/GitHub/scpl-editor/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"/Users/brandonjordan/Documents/GitHub/scpl-editor/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _inherits = require(\"/Users/brandonjordan/Documents/GitHub/scpl-editor/node_modules/@babel/runtime/helpers/inherits\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar OutputData_1 = require(\"./OutputData\");\n\nvar HelpfulActions_1 = require(\"./HelpfulActions\");\n\nvar ArgParser_1 = require(\"./ArgParser\");\n\nvar Actions_1 = require(\"./Data/Actions\");\n\nfunction genShortName(longName, internalName, allowUppercase) {\n  var shortName = longName || internalName || \"nameless\"; // lower case\n\n  if (!allowUppercase) {\n    shortName = (longName || internalName || \"nameless\").toLowerCase();\n  } // remove special characters\n\n\n  shortName = shortName.replace(/[^A-Za-z0-9]/g, \"\");\n  return shortName;\n}\n\nexports.genShortName = genShortName;\n\nvar WFParameter_1 = require(\"./Parameters/WFParameter\");\n\nvar types = {};\ntypes.WFParameter = WFParameter_1.WFParameter;\n\nvar WFEnumerationParameter_1 = require(\"./Parameters/WFEnumerationParameter\");\n\ntypes.WFEnumerationParameter = WFEnumerationParameter_1.WFEnumerationParameter;\n\nvar WFDynamicEnumerationParameter_1 = require(\"./Parameters/WFDynamicEnumerationParameter\");\n\ntypes.WFDynamicEnumerationParameter = WFDynamicEnumerationParameter_1.WFDynamicEnumerationParameter;\n\nvar WFAppPickerParameter_1 = require(\"./Parameters/WFAppPickerParameter\");\n\ntypes.WFAppPickerParameter = WFAppPickerParameter_1.WFAppPickerParameter;\n\nvar WFNumberFieldParameter_1 = require(\"./Parameters/WFNumberFieldParameter\");\n\ntypes.WFNumberFieldParameter = WFNumberFieldParameter_1.WFNumberFieldParameter;\n\nvar WFStepperParameter_1 = require(\"./Parameters/WFStepperParameter\");\n\ntypes.WFStepperParameter = WFStepperParameter_1.WFStepperParameter;\n\nvar WFSliderParameter_1 = require(\"./Parameters/WFSliderParameter\");\n\ntypes.WFSliderParameter = WFSliderParameter_1.WFSliderParameter;\n\nvar WFSpeakTextRateParameter_1 = require(\"./Parameters/WFSpeakTextRateParameter\");\n\ntypes.WFSpeakTextRateParameter = WFSpeakTextRateParameter_1.WFSpeakTextRateParameter;\n\nvar WFContentArrayParameter_1 = require(\"./Parameters/WFContentArrayParameter\");\n\ntypes.WFContentArrayParameter = WFContentArrayParameter_1.WFContentArrayParameter;\n\ntypes.WFArrayParameter =\n/*#__PURE__*/\nfunction (_WFContentArrayParame) {\n  _inherits(_class, _WFContentArrayParame);\n\n  function _class() {\n    _classCallCheck(this, _class);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(_class).apply(this, arguments));\n  }\n\n  return _class;\n}(WFContentArrayParameter_1.WFContentArrayParameter); // not sure what the difference is\n\n\nvar WFVariablePickerParameter_1 = require(\"./Parameters/WFVariablePickerParameter\");\n\ntypes.WFVariablePickerParameter = WFVariablePickerParameter_1.WFVariablePickerParameter;\n\nvar WFTextInputParameter_1 = require(\"./Parameters/WFTextInputParameter\");\n\ntypes.WFTextInputParameter = WFTextInputParameter_1.WFTextInputParameter;\n\nvar WFCustomDateFormatParameter =\n/*#__PURE__*/\nfunction (_WFTextInputParameter) {\n  _inherits(WFCustomDateFormatParameter, _WFTextInputParameter);\n\n  function WFCustomDateFormatParameter(data) {\n    var name = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"Date Format String\";\n    var docs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"https://pfgithub.github.io/shortcutslang/gettingstarted#text-field\";\n\n    _classCallCheck(this, WFCustomDateFormatParameter);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(WFCustomDateFormatParameter).call(this, data, name, docs));\n  }\n\n  return WFCustomDateFormatParameter;\n}(WFTextInputParameter_1.WFTextInputParameter);\n\ntypes.WFCustomDateFormatParameter = WFCustomDateFormatParameter;\n\nvar WFCountryFieldParameter =\n/*#__PURE__*/\nfunction (_WFTextInputParameter2) {\n  _inherits(WFCountryFieldParameter, _WFTextInputParameter2);\n\n  function WFCountryFieldParameter(data) {\n    var name = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"Country\";\n    var docs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"https://pfgithub.github.io/shortcutslang/gettingstarted#text-field\";\n\n    _classCallCheck(this, WFCountryFieldParameter);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(WFCountryFieldParameter).call(this, data, name, docs));\n  }\n\n  return WFCountryFieldParameter;\n}(WFTextInputParameter_1.WFTextInputParameter);\n\ntypes.WFCountryFieldParameter = WFCountryFieldParameter;\n\nvar WFDateFieldParameter =\n/*#__PURE__*/\nfunction (_WFTextInputParameter3) {\n  _inherits(WFDateFieldParameter, _WFTextInputParameter3);\n\n  function WFDateFieldParameter(data) {\n    var name = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"Date\";\n    var docs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"https://pfgithub.github.io/shortcutslang/gettingstarted#text-field\";\n\n    _classCallCheck(this, WFDateFieldParameter);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(WFDateFieldParameter).call(this, data, name, docs));\n  }\n\n  return WFDateFieldParameter;\n}(WFTextInputParameter_1.WFTextInputParameter);\n\ntypes.WFDateFieldParameter = WFDateFieldParameter;\n\nvar WFLocationFieldParameter =\n/*#__PURE__*/\nfunction (_WFTextInputParameter4) {\n  _inherits(WFLocationFieldParameter, _WFTextInputParameter4);\n\n  function WFLocationFieldParameter(data) {\n    var name = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"Location\";\n    var docs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"https://pfgithub.github.io/shortcutslang/gettingstarted#text-field\";\n\n    _classCallCheck(this, WFLocationFieldParameter);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(WFLocationFieldParameter).call(this, data, name, docs));\n  }\n\n  return WFLocationFieldParameter;\n}(WFTextInputParameter_1.WFTextInputParameter);\n\ntypes.WFLocationFieldParameter = WFLocationFieldParameter;\n\nvar WFEmailAddressFieldParameter_1 = require(\"./Parameters/WFEmailAddressFieldParameter\");\n\ntypes.WFEmailAddressFieldParameter = WFEmailAddressFieldParameter_1.WFEmailAddressFieldParameter;\n\nvar WFDictionaryParameter_1 = require(\"./Parameters/WFDictionaryParameter\");\n\ntypes.WFDictionaryParameter = WFDictionaryParameter_1.WFDictionaryParameter;\n\nvar WFSwitchParameter_1 = require(\"./Parameters/WFSwitchParameter\");\n\ntypes.WFSwitchParameter = WFSwitchParameter_1.WFSwitchParameter;\n\nvar WFExpandingParameter_1 = require(\"./Parameters/WFExpandingParameter\");\n\ntypes.WFExpandingParameter = WFExpandingParameter_1.WFExpandingParameter;\n\nvar WFFilterParameter_1 = require(\"./Parameters/WFFilterParameter\");\n\ntypes.WFFilterParameter = WFFilterParameter_1.WFFilterParameter;\n\nvar WFTimeOffsetParameter_1 = require(\"./Parameters/WFTimeOffsetParameter\");\n\ntypes.WFTimeOffsetParameter = WFTimeOffsetParameter_1.WFTimeOffsetParameter;\n\nvar WFVariableFieldParameter_1 = require(\"./Parameters/WFVariableFieldParameter\");\n\ntypes.WFVariableFieldParameter = WFVariableFieldParameter_1.WFVariableFieldParameter;\n\nfunction addStaticEnum(internalName, visibleName, options) {\n  types[internalName] =\n  /*#__PURE__*/\n  function (_WFEnumerationParamet) {\n    _inherits(_class2, _WFEnumerationParamet);\n\n    function _class2(data) {\n      var _this;\n\n      var name = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : visibleName;\n      var docs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"https://pfgithub.github.io/shortcutslang/gettingstarted#enum-select-field\";\n\n      _classCallCheck(this, _class2);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(_class2).call(this, data, name, docs));\n      _this.options = options;\n      _this.allowsVariables = true;\n      return _this;\n    }\n\n    return _class2;\n  }(WFEnumerationParameter_1.WFEnumerationParameter);\n}\n\nfunction addDynamicEnum(internalName, visibleName) {\n  types[internalName] =\n  /*#__PURE__*/\n  function (_WFDynamicEnumeration) {\n    _inherits(_class3, _WFDynamicEnumeration);\n\n    function _class3(data) {\n      var name = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : visibleName;\n      var docs = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"https://pfgithub.github.io/shortcutslang/gettingstarted#other-fields\";\n\n      _classCallCheck(this, _class3);\n\n      return _possibleConstructorReturn(this, _getPrototypeOf(_class3).call(this, data, name, docs));\n    }\n\n    return _class3;\n  }(WFDynamicEnumerationParameter_1.WFDynamicEnumerationParameter);\n}\n\naddDynamicEnum(\"WFWorkflowPickerParameter\", \"Shortcut Picker\");\naddDynamicEnum(\"WFCalendarPickerParameter\", \"Calendar Picker\");\naddDynamicEnum(\"WFWunderlistListPickerParameter\", \"Wunderlist List Picker\");\naddDynamicEnum(\"WFTrelloBoardPickerParameter\", \"Trello Board Picker\");\naddDynamicEnum(\"WFTrelloListPickerParameter\", \"Trello List Picker\");\naddDynamicEnum(\"WFTodoistProjectPickerParameter\", \"Todoist Project Picker\");\naddDynamicEnum(\"WFPlaylistPickerParameter\", \"Music Playlist Picker\");\naddDynamicEnum(\"WFEvernoteNotebookPickerParameter\", \"Evernote Notebook Picker\");\naddDynamicEnum(\"WFIntentAppPickerParameter\", \"Intent App Picker\");\naddDynamicEnum(\"WFDictateTextLanguagePickerParameter\", \"Language Picker\");\naddDynamicEnum(\"WFLightroomPresetPickerParameter\", \"Lightroom Preset Picker\");\naddDynamicEnum(\"WFPhotoAlbumPickerParameter\", \"Photo Album Picker\");\naddDynamicEnum(\"WFiTunesStoreCountryPickerParameter\", \"iTunes Store Country Picker\");\naddDynamicEnum(\"WFEmailAccountPickerParameter\", \"Email Account Picker\"); // addDynamicEnum(\"WFAppPickerParameter\", \"App Identifier\"); // open app uses app ids like com.apple.appname, don't add it for now\n\naddDynamicEnum(\"WFAccountPickerParameter\", \"Account Picker\");\naddDynamicEnum(\"WFSlackChannelPickerParameter\", \"Slack Channel Picker\");\naddDynamicEnum(\"WFTumblrBlogPickerParameter\", \"Tumblr Blog Picker\");\naddDynamicEnum(\"WFSpeakTextLanguagePickerParameter\", \"Speak Text Language Picker\");\naddDynamicEnum(\"WFSpeakTextVoicePickerParameter\", \"Speak Text Voice Picker\");\naddDynamicEnum(\"WFAlarmPickerParameter\", \"Alarm Picker\");\naddDynamicEnum(\"WFTranslateTextLanguagePickerParameter\", \"Translate Language Picker\");\naddDynamicEnum(\"WFIFTTTTriggerNameParameter\", \"IFTTT Trigger Name Picker\"); // RIP ifttt support, you will be missed.\n// addDynamicEnum(\"aaaa\", \"aaaa Picker\");\n\naddStaticEnum(\"WFStorageServicePickerParameter\", \"Storage Service Picker\", [\"iCloud Drive\", \"Dropbox\"]);\naddStaticEnum(\"WFImageConvertFormatPickerParameter\", \"Image Format Picker\", [\"JPEG\", \"PNG\", \"TIFF\", \"GIF\", \"JPEG-2000\", \"BMP\", \"PDF\", \"Match Input\"]);\naddStaticEnum(\"WFUnitTypePickerParameter\", \"Unit Picker\", [\"Acceleration\", \"Angle\", \"Area\", \"Concentration Mass\", \"Dispersion\", \"Duration\", \"Eletric Charge\", \"Electric Potential Difference\", \"Electric Resistance\", \"Energy\", \"Frequency\", \"Fuel Efficiency\", \"Illuminance\", \"Length\", \"Mass\", \"Power\", \"Pressure\", \"Speed\", \"Temperature\", \"Volume\"]);\naddDynamicEnum(\"WFUnitTypePickerParameter\", \"Unit Type Picker\"); // it's different for every unit type...\n// don't worry, :filter is coming to save you\n\naddStaticEnum(\"WFNetworkPickerParameter\", \"Network Type Picker\", [\"Wi-Fi\", \"Cellular\"]);\naddStaticEnum(\"WFArchiveFormatParameter\", \"Archive Format\", [\".zip\", \".tar.gz\", \".tar.bz2\", \".tar.xz\", \".tar\", \".gz\", \".cpio\", \".iso\"]);\naddStaticEnum(\"WFMapsAppPickerParameter\", \"Maps App\", [\"Maps\", \"Google Maps\", \"Waze\"]); // TODO WFDynamicTagFieldParameter gives a list of options that you can check\n// AlarmFrequencyPicker is a static tag, accepts an array of values which must be one of [Sunday,Monday,...]. Check what the output looks like.\n// WFEvernoteTagsTagFieldParameter is a dynamic tag\n// phone number is like email but accepts phone numbers\n// WFContactHandleField: Must be Ask When Run or Variable\n\nvar _debugMissingTypes = {};\nvar _debugTypes = {};\n\nvar WFAction =\n/*#__PURE__*/\nfunction () {\n  function WFAction(data, id) {\n    var _this2 = this;\n\n    _classCallCheck(this, WFAction);\n\n    //\n    this._data = data;\n    this.id = id;\n    this.isComplete = true;\n    this._parameters = [];\n    this.internalName = this.id;\n    this.name = this._data.Name;\n\n    if (data.AppInfo) {\n      this.name += \" (\".concat(data.AppInfo, \")\");\n    }\n\n    this.shortName = genShortName(this.name, this.internalName);\n    this.readableName = genShortName(this.name, this.internalName, true);\n    this.name = this.name || this.shortName;\n    var parameterNames = {};\n\n    if (this._data.Parameters) {\n      this._parameters = this._data.Parameters.map(function (param) {\n        _debugTypes[param.Class] = {\n          paramClass: param.Class,\n          missing: !types[param.Class],\n          count: _debugTypes[param.Class] ? _debugTypes[param.Class].count + 1 : 1\n        }; // if(param.Class === \"WFExpandingParameter\") {\n        // \treturn;\n        // }\n\n        if (types[param.Class]) {\n          var type = types[param.Class];\n          var paramVal = new type(param);\n\n          if (parameterNames[paramVal.shortName]) {\n            // console.warn(`IN: ${this.internalName}: Two parameters named ${paramVal.shortName} exist.`);\n            paramVal.shortName += \"2\";\n            paramVal.readableName += \"2\";\n          }\n\n          parameterNames[paramVal.shortName] = true;\n          return paramVal;\n        }\n\n        _this2.isComplete = false;\n        _debugMissingTypes[param.Class] = _debugMissingTypes[param.Class] !== undefined ? _debugMissingTypes[param.Class] + 1 : 1;\n        return \"This paramtype is not implemented. \".concat(param.Class);\n      }).filter(function (i) {\n        return i;\n      });\n    }\n  }\n\n  _createClass(WFAction, [{\n    key: \"genDocsParams\",\n    value: function genDocsParams() {\n      return this._parameters.map(function (param) {\n        if (typeof param === \"string\") {\n          return {\n            argType: \"NotImplemented\"\n          };\n        }\n\n        return {\n          argName: param.readableName,\n          argType: param.genDocsArgName(),\n          argAutocompletePlaceholder: param.genDocsAutocompletePlaceholder()\n        };\n      });\n    }\n  }, {\n    key: \"genDocsAutocompleteUsage\",\n    value: function genDocsAutocompleteUsage() {\n      var docsParams = this.genDocsParams();\n      var autocompleteUsage = \"\".concat(this.readableName, \" \").concat(docsParams.map(function (arg, i) {\n        return \"\".concat(arg.argName, \"=${\").concat(i + 1).concat(arg.argAutocompletePlaceholder, \"}\");\n      }).join(\" \")).trim();\n\n      if (autocompleteUsage.replace(/${.+?}/g, \"valuehere\").length > 120) {\n        autocompleteUsage = \"\".concat(this.readableName, \" (\\n\").concat(docsParams.map(function (arg, i) {\n          return \"\\t\".concat(arg.argName, \"=${\").concat(i + 1).concat(arg.argAutocompletePlaceholder, \"}\");\n        }).join(\",\\n\"), \"\\n)\").trim();\n      }\n\n      if (docsParams.length === 1) {\n        autocompleteUsage = \"\".concat(this.readableName, \" ${1\").concat(docsParams[0].argAutocompletePlaceholder, \"}\");\n      } // \t\tlet autocompleteUsage = `${this.readableName} (\n      // ${docsParams\n      // \t.map(\n      // \t\t(arg, i) =>\n      // \t\t\t`\\t${arg.argName}=\\${${i + 1}${arg.argAutocompletePlaceholder}}`\n      // \t)\n      // \t.join(\",\\n\")}\n      // )${this._data.BlockInfo ? this._data.BlockInfo.Completion : \"\"}\n      // `;\n      // \t\tif (docsParams.length === 1) {\n      // \t\t\tautocompleteUsage = `${this.readableName} ${docsParams\n      // \t\t\t\t.map(\n      // \t\t\t\t\t(arg, i) => `\\${${i + 1}${arg.argAutocompletePlaceholder}}`\n      // \t\t\t\t)\n      // \t\t\t\t.join(\" \")}${\n      // \t\t\t\tthis._data.BlockInfo ? this._data.BlockInfo.Completion : \"\"\n      // \t\t\t}`;\n      // \t\t}\n      // \t\tif (autocompleteUsage.length < 80) {\n      // \t\t\tautocompleteUsage = `${this.readableName} ${docsParams\n      // \t\t\t\t.map(\n      // \t\t\t\t\t(arg, i) =>\n      // \t\t\t\t\t\t`${arg.argName}=\\${${i + 1}${\n      // \t\t\t\t\t\t\targ.argAutocompletePlaceholder\n      // \t\t\t\t\t\t}}`\n      // \t\t\t\t)\n      // \t\t\t\t.join(\" \")}${\n      // \t\t\t\tthis._data.BlockInfo ? this._data.BlockInfo.Completion : \"\"\n      // \t\t\t}\n      // `;\n      // \t\t}\n\n\n      return autocompleteUsage + (this._data.BlockInfo ? this._data.BlockInfo.Completion : \"\");\n    }\n  }, {\n    key: \"genDocsUsage\",\n    value: function genDocsUsage() {\n      var docsParams = this.genDocsParams();\n      var paramUsage;\n\n      if (docsParams.length === 1) {\n        paramUsage = docsParams[0].argType;\n      } else {\n        paramUsage = docsParams.map(function (_ref) {\n          var argName = _ref.argName,\n              argType = _ref.argType;\n          return \"\".concat(argName, \"=\").concat(argType);\n        }).join(\" \");\n      }\n\n      return \"```\\n\".concat(this.readableName, \" \").concat(paramUsage).concat(this._data.BlockInfo ? this._data.BlockInfo.Example : \"\", \"\\n```\");\n    }\n  }, {\n    key: \"genDocs\",\n    value: function genDocs() {\n      var docs = \"\\n## \".concat(this.name, \" / \").concat(this.readableName, \" (internally `\").concat(this.internalName, \"`)\\n\").concat(this.isComplete ? \"\" : \"\\n> This action is not yet complete. Some arguments may be missing.\\n\").concat(this._data.RequiredResources ? \"\\n> This action requires that Shortcuts has permission to use \".concat(this._data.RequiredResources, \".\\n\") : \"\").concat(this._data.BlockInfo ? \"\\n> This action has a block. Make sure to end it with an end. (More info in usage below)\\n\" : \"\", \"\\n\").concat(this._data.Description ? \"\\n## description\".concat(this._data.Description.DescriptionSummary ? \"\\n\\n### summary\\n\\n\".concat(this._data.Description.DescriptionSummary, \"\\n\") : \"\").concat(this._data.Description.DescriptionNote ? \"\\n\\n### note\\n\\n\".concat(this._data.Description.DescriptionNote, \"\\n\") : \"\").concat(this._data.Description.DescriptionInput ? \"\\n\\n### input\\n\\n\".concat(this._data.Description.DescriptionInput, \"\\n\") : \"\").concat(this._data.Description.DescriptionResult ? \"\\n\\n### output\\n\\n\".concat(this._data.Description.DescriptionResult) : \"\") : \"\", \"\\n\\n### usage\\n\").concat(this.genDocsUsage(), \"\\n\\n### arguments\\n\\n---\\n\\n\").concat(this._parameters.map(function (param) {\n        return typeof param === \"string\" ? \"#### \".concat(param) : param.genDocs();\n      }).join(\"\\n\\n---\\n\\n\"), \"\\n\\n---\\n\\n### source json (for developers)\\n\\n```json\\n\").concat(JSON.stringify(this._data, null, \"\\t\"), \"\\n```\\n\");\n      return docs;\n    }\n  }, {\n    key: \"getParameters\",\n    value: function getParameters() {\n      var res = {};\n\n      this._parameters.forEach(function (param) {\n        if (typeof param === \"string\") {\n          return;\n        }\n\n        res[param.shortName] = param;\n      });\n\n      return res;\n    }\n  }, {\n    key: \"getParameterOrder\",\n    value: function getParameterOrder() {\n      return this._parameters;\n    }\n  }, {\n    key: \"build\",\n    value: function build(cc, actionPosition, controlFlowData) {\n      for (var _len = arguments.length, params = new Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {\n        params[_key - 3] = arguments[_key];\n      }\n\n      var parami = 0;\n      var actionAbove = cc.lastVariableAction; // TODO actionAbove = cc.lastVariableAction\n      //\n\n      var action = new OutputData_1.Action(actionPosition.start, actionPosition.end, this.name, this.id);\n\n      if (controlFlowData) {\n        var uuid = controlFlowData.uuid,\n            number = controlFlowData.number;\n        action.parameters.set(\"WFControlFlowMode\", number);\n        action.parameters.set(\"GroupingIdentifier\", uuid);\n        params = []; // Params should be ignored if we are a second or third... in control flow\n      } else if (this._data.BlockInfo) {\n        // this action has a block.\n        var _cc$pushControlFlow = cc.pushControlFlow(this),\n            _cc$pushControlFlow2 = _slicedToArray(_cc$pushControlFlow, 1),\n            _cc$pushControlFlow2$ = _cc$pushControlFlow2[0],\n            _uuid = _cc$pushControlFlow2$.uuid,\n            _number = _cc$pushControlFlow2$.number; // Add the controlflow\n\n\n        action.parameters.set(\"WFControlFlowMode\", _number);\n        action.parameters.set(\"GroupingIdentifier\", _uuid);\n      }\n\n      var vi = 0;\n      ArgParser_1.ArgParser(this._parameters.map(function (param) {\n        return {\n          name: typeof param === \"string\" ? \"undefined\".concat(vi++) : param.shortName,\n          data: param\n        };\n      }), function (name, param) {\n        if (typeof name.data === \"string\") {\n          throw param.error(cc, \"Data is string. This should have been caught earlier. This should never happen.\");\n        }\n\n        action.parameters.set(name.data.internalName, name.data.build(cc, param));\n      }, function (param) {\n        if (!param.canBeAction(cc)) {\n          throw param.error(cc, \"InputArg fields only accept actions and variables.\");\n        }\n\n        actionAbove = param.asAction(cc);\n        return;\n      }, function (name, param) {\n        if (typeof name.data === \"string\") {\n          throw param.error(cc, \"This field is not supported yet. If you need this field, submit an issue or pull request on github requesting it. Reason: \".concat(name.data));\n        }\n\n        if (action.parameters.has(name.data.internalName)) {\n          return false;\n        }\n\n        return name.data.shouldEnable(action);\n      }, {\n        cc: cc,\n        args: params\n      });\n\n      if (actionAbove && this.requiresInput && actionAbove !== cc.lastVariableAction) {\n        cc.add(HelpfulActions_1.getVariable({\n          start: actionAbove.start,\n          end: actionAbove.end\n        }, new OutputData_1.MagicVariable(actionAbove)));\n      } // TODO if(actionAbove) cc.add(getVariableAction(actionAbove))\n\n\n      cc.add(action);\n      return action;\n    }\n  }, {\n    key: \"actionOutputType\",\n    get: function get() {\n      // TODO !!! used for the default output type in variables\n      return this._data.Output.Types[0];\n    }\n  }, {\n    key: \"inputPassthrough\",\n    get: function get() {\n      return this._data.InputPassthrough;\n    }\n  }, {\n    key: \"hasVariable\",\n    get: function get() {\n      // If this action has a magic variable\n      return !this.inputPassthrough;\n    }\n  }, {\n    key: \"requiresInput\",\n    get: function get() {\n      return true;\n    }\n  }]);\n\n  return WFAction;\n}();\n\nexports.WFAction = WFAction; // let textAction = new WFAction(actionList[0][\"is.workflow.actions.gettext\"], \"is.workflow.acitons.gettext\");\n// console.log(\n// \ttextAction.build(new IdentifierParse(\"Hellothere\"))\n// );\n\nvar actionsByName = {};\nvar actionsByID = {};\nObject.keys(Actions_1.default).forEach(function (key) {\n  // console.log(key);\n  var value = Actions_1.default[key];\n  var action = new WFAction(value, key);\n\n  if (actionsByName[action.shortName]) {\n    //eslint-disable-next-line no-console\n    console.warn(\"WARNING, \".concat(action.shortName, \" (\").concat(action.internalName, \") is already defined\"));\n    return;\n  }\n\n  actionsByID[key] = action;\n  actionsByName[action.shortName] = action; // actions[action.name.toLowerCase().split` `.join``] = action;\n});\n\nfunction genReadme() {\n  var totalActions = Object.keys(actionsByID).length;\n  var completedActions = Object.values(actionsByID).filter(function (action) {\n    return action.isComplete;\n  }).length;\n  var typeList = Object.values(_debugTypes).sort(function (a, b) {\n    return a.count - b.count;\n  }).map(function (_ref2) {\n    var paramClass = _ref2.paramClass,\n        count = _ref2.count,\n        missing = _ref2.missing;\n    return \"- [\".concat(missing ? \" \" : \"x\", \"] \").concat(missing ? \"\" : \"Complete - \").concat(count, \": \").concat(paramClass);\n  });\n  return \"# ScPL\\n\\n[Getting Started Guide](https://pfgithub.github.io/shortcutslang/gettingstarted.html)\\n\\n[Try Shortcutslang in a web browser](https://editor.scpl.dev)\\n\\n\".concat(completedActions, \"/\").concat(totalActions, \" builtin actions supported\\n\\n## All Actions:\\n\\n\").concat(Object.values(actionsByID).sort(function (a, b) {\n    return a.name > b.name ? 1 : a.name < b.name ? -1 : 0;\n  }).map(function (action) {\n    return \"- [\".concat(action.name, \" (`\").concat(action.readableName, \"`)](actions/\").concat(action.shortName, \")\").concat(action.isComplete ? \"\" : \" (Incomplete)\");\n  }).join(\"\\n\"), \"\\n\\n## Parameter Types:\\n\\n\\\\# actions used in: parameter type\\n\\n\").concat(typeList.join(\"\\n\"), \"\\n\\n\");\n}\n\nexports.genReadme = genReadme;\n/*\nconsole.log(\"All Actions:\", Object.keys(actionsByID).length);\nconsole.log(\"Complete   :\", Object.values(actionsByID).filter(action=>action.isComplete).length);\nconsole.log(\"Missing    :\", Object.keys(_debugMissingTypes).length);\nconsole.log(\"List:\", Object.keys(_debugMissingTypes)\n    .map(a=>[a, _debugMissingTypes[a]])\n    .sort((a, b) => a[1] - b[1])\n    .map(([a, b])=>`${a}: ${b}`)\n);\n*/\n\nfunction getActionFromID(id) {\n  if (!actionsByID[id]) {\n    return undefined;\n  }\n\n  return actionsByID[id];\n}\n\nexports.getActionFromID = getActionFromID;\n\nfunction getActionFromName(name) {\n  name = name.toLowerCase();\n\n  if (!actionsByName[name]) {\n    return undefined;\n  }\n\n  return actionsByName[name];\n}\n\nexports.getActionFromName = getActionFromName;\nexports.allActions = Object.values(actionsByID);\nexports.WFTypes = types; // let getValueForKeyAction = new WFAction(actionList[0][\"is.workflow.actions.getvalueforkey\"], \"is.workflow.acitons.getvalueforkey\");\n// console.log(\n// \tgetValueForKeyAction.build(\n// \t\tnew IdentifierParse(\"Value\"),\n// \t\tnew IdentifierParse(\"myvalue\")\n// \t).build()\n// );","map":null,"metadata":{},"sourceType":"script"}