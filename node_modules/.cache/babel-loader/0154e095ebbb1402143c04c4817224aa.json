{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar ShortcutsParser_1 = require(\"./src/ShortcutsParser\");\n\nvar bplistc = require(\"bplist-creator\");\n\nvar ParserData_1 = require(\"./src/ParserData\");\n\nexports.PositionedError = ParserData_1.PositionedError;\n\nvar Converter_1 = require(\"./src/Converter\");\n\nexports.ConvertingContext = Converter_1.ConvertingContext;\n\nvar OutputData_1 = require(\"./src/OutputData\");\n\nvar InverseConvertingContext_1 = require(\"./src/InverseConvertingContext\");\n\nvar bplistp = require(\"bplist-parser\");\n\nvar ActionData_1 = require(\"./src/ActionData\");\n\nexports.allActions = ActionData_1.allActions;\nexports.getActionFromID = ActionData_1.getActionFromID;\nexports.getActionFromName = ActionData_1.getActionFromName;\n\nfunction parse(string, options) {\n  var parsed;\n\n  try {\n    parsed = ShortcutsParser_1.default.parse(string, [1, 1]);\n  } catch (er) {\n    if (er instanceof ParserData_1.PositionedError) {\n      throw er;\n    }\n\n    throw new ParserData_1.PositionedError(\"Error somewhere: \".concat(er.toString()), [1, 1], [100, 1]);\n  }\n\n  if (!parsed.success) {\n    throw new ParserData_1.PositionedError(\"Failed to parse anything\", [1, 1], [100, 1]);\n  }\n\n  if (parsed.remainingStr) {\n    if (!parsed.pos) {\n      throw new Error(\"!parsed.pos\");\n    }\n\n    throw new ParserData_1.PositionedError(\"Parsing error around here\", parsed.pos, [parsed.pos[0] + 100, 1]);\n  }\n\n  var generateScPLData = options.generateScPLData === undefined ? true : false;\n  var cc;\n\n  if (options.ccOverride) {\n    cc = options.ccOverride;\n  } else {\n    cc = new Converter_1.ConvertingContext();\n  }\n\n  var converterActions = options.extraParseActions;\n\n  if (converterActions) {\n    Object.keys(converterActions).forEach(function (key) {\n      cc.setParserAction(key, converterActions[key]);\n    });\n  }\n\n  cc.useWarnings = !!options.useWarnings;\n  var shortcut;\n\n  try {\n    shortcut = parsed.data.asShortcut(cc, {\n      useWarnings: !!options.useWarnings\n    });\n  } catch (er) {\n    if (er instanceof ParserData_1.PositionedError) {\n      throw er;\n    }\n\n    throw new ParserData_1.PositionedError(\"Unknown location in error: \".concat(er.message), [1, 1], [100, 1]);\n  }\n\n  if (options.make) {\n    var data = shortcut.build();\n    var output = {};\n\n    if (options.make.indexOf(\"outputdata\") > -1) {\n      output.outputdata = shortcut;\n    }\n\n    if (options.make.indexOf(\"shortcutjson\") > -1) {\n      output.shortcutjson = data;\n    }\n\n    if (options.make.indexOf(\"shortcutplist\") > -1) {\n      output.shortcutplist = bplistc(data);\n    }\n\n    if (options.useWarnings) {\n      output.warnings = cc.warnings;\n    }\n\n    return output;\n  }\n\n  if (options.makePlist) {\n    return bplistc(shortcut.build());\n  }\n\n  return shortcut;\n}\n\nexports.parse = parse;\n\nfunction inverse(data) {\n  var icc = new InverseConvertingContext_1.InverseConvertingContext();\n\n  if (data instanceof Buffer) {\n    data = bplistp.parseBuffer(data);\n  }\n\n  var result = icc.createActionsAble(OutputData_1.Shortcut.inverse(data));\n  return result;\n}\n\nexports.inverse = inverse;","map":null,"metadata":{},"sourceType":"script"}