{"version":3,"file":"levenshtein.js","sourceRoot":"","sources":["../../../src/core/levenshtein.ts"],"names":[],"mappings":"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","sourcesContent":["/*\n * Levenshtein distance, from the `js-levenshtein` NPM module.\n * Copied here to avoid complexity of adding another CommonJS module dependency.\n */\n\nfunction _min(d0: number, d1: number, d2: number, bx: number, ay: number): number {\n  return d0 < d1 || d2 < d1\n      ? d0 > d2\n          ? d2 + 1\n          : d0 + 1\n      : bx === ay\n          ? d1\n          : d1 + 1;\n}\n\n/**\n * Calculates levenshtein distance.\n * @param a\n * @param b\n */\nexport default function levenshtein(a: string, b: string): number {\n  if (a === b) {\n    return 0;\n  }\n\n  if (a.length > b.length) {\n    const tmp = a;\n    a = b;\n    b = tmp;\n  }\n\n  let la = a.length;\n  let lb = b.length;\n\n  while (la > 0 && (a.charCodeAt(la - 1) === b.charCodeAt(lb - 1))) {\n    la--;\n    lb--;\n  }\n\n  let offset = 0;\n\n  while (offset < la && (a.charCodeAt(offset) === b.charCodeAt(offset))) {\n    offset++;\n  }\n\n  la -= offset;\n  lb -= offset;\n\n  if (la === 0 || lb === 1) {\n    return lb;\n  }\n\n  const vector = new Array<number>(la << 1);\n\n  for (let y = 0; y < la; ) {\n    vector[la + y] = a.charCodeAt(offset + y);\n    vector[y] = ++y;\n  }\n\n  let x: number;\n  let d0: number;\n  let d1: number;\n  let d2: number;\n  let d3: number;\n  for (x = 0; (x + 3) < lb; ) {\n    const bx0 = b.charCodeAt(offset + (d0 = x));\n    const bx1 = b.charCodeAt(offset + (d1 = x + 1));\n    const bx2 = b.charCodeAt(offset + (d2 = x + 2));\n    const bx3 = b.charCodeAt(offset + (d3 = x + 3));\n    let dd = (x += 4);\n    for (let y = 0; y < la; ) {\n      const ay = vector[la + y];\n      const dy = vector[y];\n      d0 = _min(dy, d0, d1, bx0, ay);\n      d1 = _min(d0, d1, d2, bx1, ay);\n      d2 = _min(d1, d2, d3, bx2, ay);\n      dd = _min(d2, d3, dd, bx3, ay);\n      vector[y++] = dd;\n      d3 = d2;\n      d2 = d1;\n      d1 = d0;\n      d0 = dy;\n    }\n  }\n\n  let dd: number = 0;\n  for (; x < lb; ) {\n    const bx0 = b.charCodeAt(offset + (d0 = x));\n    dd = ++x;\n    for (let y = 0; y < la; y++) {\n      const dy = vector[y];\n      vector[y] = dd = dy < d0 || dd < d0\n          ? dy > dd ? dd + 1 : dy + 1\n          : bx0 === vector[la + y]\n              ? d0\n              : d0 + 1;\n      d0 = dy;\n    }\n  }\n\n  return dd;\n}\n"]}