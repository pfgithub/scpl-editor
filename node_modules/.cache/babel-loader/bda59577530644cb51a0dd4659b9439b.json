{"ast":null,"code":"import _classCallCheck from \"/Users/brandonjordan/Documents/GitHub/scpl-editor/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/brandonjordan/Documents/GitHub/scpl-editor/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/brandonjordan/Documents/GitHub/scpl-editor/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/brandonjordan/Documents/GitHub/scpl-editor/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/brandonjordan/Documents/GitHub/scpl-editor/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/brandonjordan/Documents/GitHub/scpl-editor/src/App.tsx\";\nimport React, { Component } from \"react\";\nimport { parse, PositionedError } from \"scpl\";\nimport \"./App.css\"; // import {Helmet} from \"react-helmet\";\n\nimport testshortcut from \"./testshortcut.json\";\nimport ace from \"brace\";\nimport \"./ace/mode-scpl\";\nimport \"brace/theme/chrome\";\nimport \"brace/ext/language_tools\";\nimport \"brace/ext/searchbox\";\nimport AceEditor from \"react-ace\";\nimport { FilePane } from \"./FilePane\";\nimport { SearchActions } from \"./SearchActions\";\nimport { DownloadModal } from \"./DownloadModal\";\nimport { keys } from \"./Key\";\nimport { UploadShortcutModal } from \"./UploadShortcutModal\";\nimport { ErrorBoundary } from \"./ErrorBoundary\";\nimport ShortcutPreview from \"shortcut-preview\";\nvar timeout;\nvar Range = ace.acequire(\"ace/range\").Range;\nvar langTools = ace.acequire(\"ace/ext/language_tools\");\nvar findAndReplace = ace.acequire(\"ace/ext/searchbox\");\nvar rhymeCompleter = {\n  getCompletions: function getCompletions(editor, session, pos, prefix, callback) {\n    if (prefix.length === 0) {\n      callback(null, []);\n      return;\n    }\n\n    var variables = session.getValue().match(/(v|mv):([A-Za-z0-9]+)/g);\n    console.log(variables);\n\n    if (!variables) {\n      callback(null, []);\n      return;\n    }\n\n    callback(null, variables.map(function (v) {\n      return {\n        name: v,\n        value: v,\n        score: 25,\n        meta: v\n      };\n    }));\n  }\n};\nlangTools.addCompleter(rhymeCompleter);\nvar hotkey = window.navigator.platform === \"MacIntel\" || window.navigator.platform.includes(\"Win\") ? \"âŒ˜\" : \"^\";\n\nvar MaybeUpdate =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(MaybeUpdate, _Component);\n\n  function MaybeUpdate() {\n    _classCallCheck(this, MaybeUpdate);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(MaybeUpdate).apply(this, arguments));\n  }\n\n  _createClass(MaybeUpdate, [{\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps) {\n      return nextProps.shouldUpdate;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return this.props.children;\n    }\n  }]);\n\n  return MaybeUpdate;\n}(Component);\n\nvar App =\n/*#__PURE__*/\nfunction (_Component2) {\n  _inherits(App, _Component2);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n    _this.reactAceComponentRef = void 0;\n    _this.state = {\n      fileValue: \"...\",\n      shortcutData: testshortcut,\n      shortcutDownload: undefined,\n      annotations: [],\n      markers: [],\n      loading: false,\n      took: {\n        waitedFor: 0,\n        convertedIn: 0\n      },\n      mobileFilemenu: false,\n      openDownload: false,\n      showPreview: false,\n      showPreviewFullscreen: false,\n      showUploadShortcutModal: false,\n      errors: [],\n      tabs: [{\n        filename: \"download.scpl\",\n        active: true\n      }],\n      files: {\n        \"download.scpl\": \"ShowResult \\\"Hello ScPL\\\"\\n\\tChooseFromMenu \\\"ScPL Editor\\\" items=[\\\"Getting Started\\\", \\\"View Documentation\\\"]\\n\\tCase \\\"Getting Started\\\"\\n\\t    URL \\\"https://docs.scpl.dev/gettingstarted\\\"\\n\\tCase \\\"View Documentation\\\"\\n\\t    URL \\\"https://docs.scpl.dev/\\\"\\n\\tEnd Menu\\n\\tOpenURLs\",\n        \"other.scpl\": \"ShowResult \\\"ScPL\\\"\",\n        urlquery: new URLSearchParams(window.location.search).get(\"scpl\") || \"\"\n      }\n    };\n    _this.reactAceComponentRef = React.createRef();\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {}\n  }, {\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var urlParams = new URLSearchParams(window.location.search);\n      this.onChange(new URLSearchParams(window.location.search).get(\"scpl\") || \"ShowResult \\\"Hello ScPL\\\"\\nChooseFromMenu \\\"ScPL Editor\\\" items=[\\\"Getting Started\\\", \\\"View Documentation\\\"]\\nCase \\\"Getting Started\\\"\\n    URL \\\"https://docs.scpl.dev/gettingstarted\\\"\\nCase \\\"View Documentation\\\"\\n    URL \\\"https://docs.scpl.dev/\\\"\\nEnd Menu\\nOpenURLs\");\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        onKeyDown: function onKeyDown(e) {\n          if (keys.save(e)) {\n            alert(\"save\");\n          }\n\n          if (keys.export(e)) {\n            _this2.setState({\n              openDownload: true\n            });\n          }\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"upload-area\",\n        style: {\n          display: \"none\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }, \"Drop file anywhere to upload\")), this.state.openDownload ? React.createElement(DownloadModal, {\n        onCancel: function onCancel() {\n          _this2.setState({\n            openDownload: false\n          });\n        },\n        filename: this.state.shortcutData._filename || \"download.shortcut\",\n        file: this.state.shortcutDownload,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }) : null, this.state.showUploadShortcutModal ? React.createElement(UploadShortcutModal, {\n        onCancel: function onCancel() {\n          return _this2.setState({\n            showUploadShortcutModal: false\n          });\n        },\n        onResult: function onResult(result) {\n          _this2.setState({\n            showUploadShortcutModal: false\n          });\n\n          _this2.onChange(result);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }) : null, React.createElement(\"div\", {\n        className: \"editor-navigation\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"mobile-filemenu\".concat(this.state.mobileFilemenu ? \" open-filemenu\" : \"\"),\n        style: {\n          display: \"none\"\n        },\n        onClick: function onClick() {\n          return _this2.setState({\n            mobileFilemenu: !_this2.state.mobileFilemenu\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"editor-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      }, \"ScPL Editor\"), React.createElement(\"div\", {\n        className: \"editor-menu\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }, \"File\", React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: \"javascript:;\",\n        onClick: function onClick() {\n          return _this2.setState({\n            showUploadShortcutModal: true\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229\n        },\n        __self: this\n      }, \"Import Shortcut from iCloud\")), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: \"javascript:;\",\n        onClick: function onClick() {\n          return _this2.setState({\n            openDownload: true\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      }, \"Export Shortcut\", React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250\n        },\n        __self: this\n      }, \"\\u21E7\", hotkey, \"S\"))))))), React.createElement(\"div\", {\n        className: \"editor-menu\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259\n        },\n        __self: this\n      }, \"Edit\", React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: \"javascript:;\",\n        onClick: function onClick() {\n          return _this2.getAce().undo();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263\n        },\n        __self: this\n      }, \"Undo\", React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269\n        },\n        __self: this\n      }, hotkey, \"Z\"))), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: \"javascript:;\",\n        onClick: function onClick() {\n          return _this2.getAce().redo();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273\n        },\n        __self: this\n      }, \"Redo\", React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280\n        },\n        __self: this\n      }, \"\\u21E7\", hotkey, \"Z\"))), React.createElement(\"div\", {\n        className: \"menu-div\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283\n        },\n        __self: this\n      }), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: \"javascript:;\",\n        onClick: function onClick() {\n          return document.execCommand(\"cut\") || alert(\"Please press ctrl/cmd+x to cut\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285\n        },\n        __self: this\n      }, \"Cut\", React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296\n        },\n        __self: this\n      }, hotkey, \"X\"))), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 299\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: \"javascript:;\",\n        onClick: function onClick() {\n          return document.execCommand(\"copy\") && alert(\"Please press ctrl/cmd+c to copy\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300\n        },\n        __self: this\n      }, \"Copy\", React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 311\n        },\n        __self: this\n      }, hotkey, \"C\"))), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 314\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: \"javascript:;\",\n        onClick: function onClick() {\n          return document.execCommand(\"paste\") || alert(\"Please press ctrl/cmd+v to paste.\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 315\n        },\n        __self: this\n      }, \"Paste\", React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 326\n        },\n        __self: this\n      }, hotkey, \"P\"))), React.createElement(\"div\", {\n        className: \"menu-div\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 329\n        },\n        __self: this\n      }), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 330\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: \"javascript:;\",\n        onClick: function onClick() {\n          return _this2.getAce().selectAll();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 331\n        },\n        __self: this\n      }, \"Select All\", React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 338\n        },\n        __self: this\n      }, hotkey, \"A\"))), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 341\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: \"javascript:;\",\n        onClick: function onClick() {\n          return findAndReplace.Search(_this2.getAce());\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 342\n        },\n        __self: this\n      }, \"Find and Replace\", React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 351\n        },\n        __self: this\n      }, hotkey, \"F\"))))))), React.createElement(\"div\", {\n        className: \"editor-menu\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 358\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 359\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 360\n        },\n        __self: this\n      }, \"Help\", React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 362\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 363\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: \"https://scpl.dev/\",\n        target: \"_blank\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 364\n        },\n        __self: this\n      }, \"Homepage\")), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 371\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: \"https://docs.scpl.dev/gettingstarted.html\",\n        target: \"_blank\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 372\n        },\n        __self: this\n      }, \"Getting Started\")), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 379\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: \"https://docs.scpl.dev/\",\n        target: \"_blank\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 380\n        },\n        __self: this\n      }, \"Documentation\"))))))), React.createElement(\"div\", {\n        className: \"search-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 392\n        },\n        __self: this\n      }, React.createElement(SearchActions, {\n        insertText: function insertText(text) {\n          console.log(\"insert\", text);\n          var reactAceComponent = _this2.reactAceComponentRef.current;\n          var editor = reactAceComponent.editor;\n          editor.session.insert(editor.getCursorPosition(), text);\n          console.log(editor.session.getValue(), text, editor.getCursorPosition());\n\n          _this2.setState({\n            fileValue: editor.session.getValue()\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 393\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 415\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"result-details\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 416\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"result-actions\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 417\n        },\n        __self: this\n      }, this.state.shortcutData[0].WFWorkflowActions.length, \" \", \"action\", this.state.shortcutData[0].WFWorkflowActions.length === 1 ? \"\" : \"s\")), React.createElement(\"div\", {\n        className: \"editor-btn\",\n        id: \"run-preview\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 430\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: \"javascript:;\",\n        onClick: function onClick() {\n          _this2.setState({\n            showPreviewFullscreen: !_this2.state.showPreviewFullscreen,\n            showPreview: !_this2.state.showPreviewFullscreen\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 431\n        },\n        __self: this\n      }, \"Preview\")), React.createElement(\"div\", {\n        className: \"editor-btn primary-btn\",\n        id: \"open-download\",\n        onClick: function onClick() {\n          return _this2.setState({\n            openDownload: true\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 445\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: \"javascript:;\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 454\n        },\n        __self: this\n      }, \"Export\")))), React.createElement(\"div\", {\n        className: \"editor-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 458\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"file-pane\".concat(this.state.mobileFilemenu ? \" open-menu\" : \"\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 459\n        },\n        __self: this\n      }, React.createElement(FilePane, {\n        files: [{\n          type: \"file\",\n          name: \"My File.scpl\"\n        }, {\n          type: \"file\",\n          name: \"Another File.scpl\"\n        }, {\n          type: \"folder\",\n          name: \"A Folder\",\n          files: [{\n            type: \"file\",\n            name: \"My File.scpl\"\n          }, {\n            type: \"folder\",\n            name: \"My Folder\",\n            files: [{\n              type: \"file\",\n              name: \"A Shortcut.scpl\"\n            }]\n          }, {\n            type: \"file\",\n            name: \"Look at all these files.scpl\"\n          }]\n        }, {\n          type: \"file\",\n          name: \"My File 2.scpl\"\n        }, {\n          type: \"file\",\n          name: \"Another File 2.scpl\"\n        }],\n        onActiveFileChanged: function onActiveFileChanged(file) {\n          return _this2.onChange(file);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 464\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"code-pane\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 510\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"error-messages\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 511\n        },\n        __self: this\n      }, this.state.errors.map(function (err) {\n        return React.createElement(\"div\", {\n          className: \"e-message\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 513\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"message-content\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 514\n          },\n          __self: this\n        }, err.message), React.createElement(\"div\", {\n          className: \"jump-error\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 517\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          onClick: function onClick() {\n            return _this2.jumpToError(err);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 518\n          },\n          __self: this\n        }, \"Jump\")));\n      })), React.createElement(\"div\", {\n        className: \"tabs-nav\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 529\n        },\n        __self: this\n      }, this.state.tabs.length > 1 ? React.createElement(\"div\", {\n        className: \"file-tabs\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 531\n        },\n        __self: this\n      }, this.state.tabs.map(function (tab) {\n        return React.createElement(\"div\", {\n          className: \"tab \".concat(tab.active ? \"active-tab\" : \"\"),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 533\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"tab-close\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 538\n          },\n          __self: this\n        }, \"\\xD7\"), React.createElement(\"div\", {\n          className: \"tab-label\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 541\n          },\n          __self: this\n        }, tab.filename));\n      })) : null), React.createElement(AceEditor, {\n        mode: \"scpl\",\n        theme: \"chrome\",\n        onChange: this.onChange.bind(this),\n        name: \"ace_editor\",\n        editorProps: {\n          $blockScrolling: Infinity\n        },\n        value: this.state.fileValue || \"\",\n        annotations: this.state.annotations,\n        markers: this.state.markers,\n        ref: this.reactAceComponentRef,\n        showPrintMargin: false,\n        enableBasicAutocompletion: true,\n        enableLiveAutocompletion: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 549\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"result-pane\".concat(this.state.loading && this.state.showPreview ? \" loading\" : \"\").concat(!this.state.showPreviewFullscreen ? \" mobiledisabled\" : \"\") // style={{\n        // \tdisplay: this.state.showPreview ? \"none\" : \"block\"\n        // }}\n        ,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 564\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"result-text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 578\n        },\n        __self: this\n      }, \"Converted in \", this.state.took.convertedIn, \" ms.\"), this.state.showPreview && this.state.errors.length === 0 ? React.createElement(ErrorBoundary, {\n        errorDisplay: function errorDisplay(err) {\n          return React.createElement(\"div\", {\n            className: \"error-overlay too-many-actions shortcut-preview-fatal-error\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 585\n            },\n            __self: this\n          }, React.createElement(\"p\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 586\n            },\n            __self: this\n          }, \"A fatal error occured in shortcut-preview. The error is\", \" \", err.toString()));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 583\n        },\n        __self: this\n      }, React.createElement(ShortcutPreview, {\n        onInteract: function onInteract(data) {\n          return _this2.onActionSelect(data);\n        },\n        data: this.state.shortcutData,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 594\n        },\n        __self: this\n      })) : null, React.createElement(\"div\", {\n        className: \"loading-result-progress\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 602\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 603\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"spinner\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 604\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"bar1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 605\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"bar2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 606\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"bar3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 607\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"bar4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 608\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"bar5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 609\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"bar6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 610\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"bar7\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 611\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"bar8\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 612\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"bar9\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 613\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"bar10\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 614\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"bar11\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 615\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"bar12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 616\n        },\n        __self: this\n      })))), !this.state.showPreview ? React.createElement(\"div\", {\n        className: \"error-overlay too-many-actions\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 621\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 622\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 623\n        },\n        __self: this\n      }, \"There are too many actions to render a preview automatically.\"), React.createElement(\"button\", {\n        className: \"btn trans-btn\",\n        onClick: function onClick() {\n          return _this2.setState({\n            showPreview: true\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 627\n        },\n        __self: this\n      }, \"Render Preview\"))) : null, this.state.errors.length !== 0 ? React.createElement(\"div\", {\n        className: \"too-many-actions render-error\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 641\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 642\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 643\n        },\n        __self: this\n      }, \"Failed to render because of code error.\"))) : null)));\n    }\n  }, {\n    key: \"onActionSelect\",\n    value: function onActionSelect(data) {\n      if (data.actionData.SCPLData) {\n        var scpldata = data.actionData.SCPLData;\n        var reactAceComponent = this.reactAceComponentRef.current;\n\n        if (!reactAceComponent) {\n          return;\n        }\n\n        var editor = reactAceComponent.editor; // .Position.start|end\n\n        var line = scpldata.Position.start[0];\n        var col = scpldata.Position.start[1] - 1;\n        editor.gotoLine(line, col, true);\n        editor.selection.setRange(new Range(scpldata.Position.start[0] - 1, scpldata.Position.start[1] - 1, scpldata.Position.end[0] - 1, scpldata.Position.end[1] - 1), true);\n      }\n    }\n  }, {\n    key: \"getAce\",\n    value: function getAce() {\n      var reactAceComponent = this.reactAceComponentRef.current;\n\n      if (!reactAceComponent) {\n        throw new Error(\"No reactacecomponent\");\n      }\n\n      var editor = reactAceComponent.editor;\n      return editor;\n    }\n  }, {\n    key: \"jumpToError\",\n    value: function jumpToError(d) {\n      var reactAceComponent = this.reactAceComponentRef.current;\n\n      if (!reactAceComponent) {\n        return;\n      }\n\n      var editor = reactAceComponent.editor;\n      var line = d.startRow;\n      var col = d.startCol - 1;\n      editor.gotoLine(line, col, true);\n      editor.selection.setRange(new Range(d.startRow - 1, d.startCol - 1, d.endRow - 1, d.endCol - 1), true);\n    }\n  }, {\n    key: \"onChange\",\n    value: function onChange(text) {\n      var _this3 = this;\n\n      var willWaitFor = Math.max(this.state.took.convertedIn * 4, 100);\n\n      if (!this.state.loading) {\n        this.setState({\n          showPreview: this.state.took.convertedIn < 50,\n          fileValue: text,\n          loading: true\n        });\n      }\n\n      if (timeout) {\n        clearTimeout(timeout);\n      }\n\n      timeout = setTimeout(function () {\n        return _this3.onChangeLimited(text, willWaitFor);\n      }, willWaitFor);\n    }\n  }, {\n    key: \"onChangeLimited\",\n    value: function onChangeLimited(text, waitedFor) {\n      // parse\n      var output;\n      var startTime = new Date().getTime();\n\n      try {\n        output = parse(text, {\n          make: [\"shortcutjson\", \"shortcutplist\"]\n        });\n      } catch (er) {\n        console.log(er.message); //eslint-disable-line no-console\n\n        if (!(er instanceof PositionedError)) {\n          throw er;\n        }\n\n        this.setState({\n          fileValue: text,\n          loading: false,\n          shortcutDownload: undefined,\n          took: {\n            waitedFor: waitedFor,\n            convertedIn: new Date().getTime() - startTime\n          },\n          annotations: [{\n            row: er.start[0] - 1,\n            column: er.start[1] - 1,\n            text: er.message,\n            // Or the Json reply from the parser\n            type: \"error\" // also warning and information\n\n          }],\n          markers: [{\n            startRow: er.start[0] - 1,\n            endRow: er.end[0] - 1,\n            startCol: er.start[1] - 1,\n            endCol: er.end[1] - 1,\n            className: \"ace_active-line error\",\n            type: \"background\"\n          }],\n          errors: [{\n            startRow: er.start[0],\n            endRow: er.end[0],\n            startCol: er.start[1],\n            endCol: er.end[1],\n            message: er.message\n          }]\n        });\n        return;\n      }\n\n      var _output = output,\n          shortcutjson = _output.shortcutjson,\n          shortcutplist = _output.shortcutplist;\n      this.setState({\n        fileValue: text,\n        took: {\n          waitedFor: waitedFor,\n          convertedIn: new Date().getTime() - startTime\n        },\n        loading: false,\n        shortcutData: shortcutjson,\n        annotations: [],\n        markers: [],\n        errors: [],\n        shortcutDownload: shortcutplist\n      });\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/Users/brandonjordan/Documents/GitHub/scpl-editor/src/App.tsx"],"names":["React","Component","parse","PositionedError","testshortcut","ace","AceEditor","FilePane","SearchActions","DownloadModal","keys","UploadShortcutModal","ErrorBoundary","ShortcutPreview","timeout","Range","acequire","langTools","findAndReplace","rhymeCompleter","getCompletions","editor","session","pos","prefix","callback","length","variables","getValue","match","console","log","map","v","name","value","score","meta","addCompleter","hotkey","window","navigator","platform","includes","MaybeUpdate","nextProps","shouldUpdate","props","children","App","reactAceComponentRef","state","fileValue","shortcutData","shortcutDownload","undefined","annotations","markers","loading","took","waitedFor","convertedIn","mobileFilemenu","openDownload","showPreview","showPreviewFullscreen","showUploadShortcutModal","errors","tabs","filename","active","files","urlquery","URLSearchParams","location","search","get","createRef","urlParams","onChange","e","save","alert","export","setState","display","_filename","result","getAce","undo","redo","document","execCommand","selectAll","Search","text","reactAceComponent","current","insert","getCursorPosition","WFWorkflowActions","type","file","err","message","jumpToError","tab","bind","$blockScrolling","Infinity","toString","data","onActionSelect","actionData","SCPLData","scpldata","line","Position","start","col","gotoLine","selection","setRange","end","Error","d","startRow","startCol","endRow","endCol","willWaitFor","Math","max","clearTimeout","setTimeout","onChangeLimited","output","startTime","Date","getTime","make","er","row","column","className","shortcutjson","shortcutplist"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { parse, PositionedError } from \"scpl\";\nimport \"./App.css\";\n// import {Helmet} from \"react-helmet\";\n\nimport testshortcut from \"./testshortcut.json\";\n\nimport ace from \"brace\";\nimport \"./ace/mode-scpl\";\nimport \"brace/theme/chrome\";\nimport \"brace/ext/language_tools\";\nimport \"brace/ext/searchbox\";\nimport AceEditor from \"react-ace\";\n\nimport { FilePane } from \"./FilePane\";\nimport { SearchActions } from \"./SearchActions\";\nimport { DownloadModal } from \"./DownloadModal\";\nimport { keys } from \"./Key\";\nimport { UploadShortcutModal } from \"./UploadShortcutModal\";\nimport { ErrorBoundary } from \"./ErrorBoundary\";\n\nimport ShortcutPreview from \"shortcut-preview\";\n\nlet timeout: NodeJS.Timeout;\n\nconst Range = ace.acequire(\"ace/range\").Range;\n\nconst langTools = ace.acequire(\"ace/ext/language_tools\");\nconst findAndReplace = ace.acequire(\"ace/ext/searchbox\");\n\nconst rhymeCompleter = {\n\tgetCompletions: (\n\t\teditor: ace.Editor,\n\t\tsession: ace.IEditSession,\n\t\tpos: ace.Position,\n\t\tprefix: string,\n\t\tcallback: (\n\t\t\tthing: null,\n\t\t\tcompletions: {\n\t\t\t\tname: string;\n\t\t\t\tvalue: string;\n\t\t\t\tscore: number;\n\t\t\t\tmeta: string;\n\t\t\t}[]\n\t\t) => void\n\t) => {\n\t\tif (prefix.length === 0) {\n\t\t\tcallback(null, []);\n\t\t\treturn;\n\t\t}\n\t\tconst variables = session.getValue().match(/(v|mv):([A-Za-z0-9]+)/g);\n\t\tconsole.log(variables);\n\t\tif (!variables) {\n\t\t\tcallback(null, []);\n\t\t\treturn;\n\t\t}\n\t\tcallback(\n\t\t\tnull,\n\t\t\tvariables.map(v => ({\n\t\t\t\tname: v,\n\t\t\t\tvalue: v,\n\t\t\t\tscore: 25,\n\t\t\t\tmeta: v\n\t\t\t}))\n\t\t);\n\t}\n};\nlangTools.addCompleter(rhymeCompleter);\n\nconst hotkey =\n\twindow.navigator.platform === \"MacIntel\" ||\n\twindow.navigator.platform.includes(\"Win\")\n\t\t? \"âŒ˜\"\n\t\t: \"^\";\n\nclass MaybeUpdate extends Component<{ shouldUpdate: boolean }, {}> {\n\tshouldComponentUpdate(nextProps: { shouldUpdate: boolean }) {\n\t\treturn nextProps.shouldUpdate;\n\t}\n\trender() {\n\t\treturn this.props.children;\n\t}\n}\n\nclass App extends Component<\n\t{},\n\t{\n\t\tfileValue: string;\n\t\tshortcutData: any;\n\t\tshortcutDownload: Buffer | undefined;\n\t\tannotations: Array<ace.Annotation>;\n\t\tmarkers: Array<{\n\t\t\tstartRow: number;\n\t\t\tendRow: number;\n\t\t\tstartCol: number;\n\t\t\tendCol: number;\n\t\t\tclassName: string;\n\t\t\ttype: string;\n\t\t}>;\n\t\terrors: Array<{\n\t\t\tstartRow: number;\n\t\t\tendRow: number;\n\t\t\tstartCol: number;\n\t\t\tendCol: number;\n\t\t\tmessage: string;\n\t\t}>;\n\t\tloading: boolean;\n\t\ttook: { waitedFor: number; convertedIn: number };\n\t\tmobileFilemenu: boolean;\n\t\topenDownload: boolean;\n\t\tshowPreview: boolean;\n\t\tshowPreviewFullscreen: boolean;\n\t\tshowUploadShortcutModal: boolean;\n\t\ttabs: { filename: string; active: boolean }[];\n\t\tfiles: {\n\t\t\t[filename: string]: string;\n\t\t};\n\t}\n> {\n\treactAceComponentRef: React.RefObject<AceEditor>;\n\tconstructor(props: Readonly<{}>) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tfileValue: \"...\",\n\t\t\tshortcutData: testshortcut,\n\t\t\tshortcutDownload: undefined,\n\t\t\tannotations: [],\n\t\t\tmarkers: [],\n\t\t\tloading: false,\n\t\t\ttook: { waitedFor: 0, convertedIn: 0 },\n\t\t\tmobileFilemenu: false,\n\t\t\topenDownload: false,\n\t\t\tshowPreview: false,\n\t\t\tshowPreviewFullscreen: false,\n\t\t\tshowUploadShortcutModal: false,\n\t\t\terrors: [],\n\t\t\ttabs: [{ filename: \"download.scpl\", active: true }],\n\t\t\tfiles: {\n\t\t\t\t\"download.scpl\": `ShowResult \"Hello ScPL\"\n\tChooseFromMenu \"ScPL Editor\" items=[\"Getting Started\", \"View Documentation\"]\n\tCase \"Getting Started\"\n\t    URL \"https://docs.scpl.dev/gettingstarted\"\n\tCase \"View Documentation\"\n\t    URL \"https://docs.scpl.dev/\"\n\tEnd Menu\n\tOpenURLs`,\n\t\t\t\t\"other.scpl\": `ShowResult \"ScPL\"`,\n\t\t\t\turlquery:\n\t\t\t\t\tnew URLSearchParams(window.location.search).get(\"scpl\") ||\n\t\t\t\t\t\"\"\n\t\t\t}\n\t\t};\n\t\tthis.reactAceComponentRef = React.createRef<AceEditor>();\n\t}\n\tcomponentDidMount() {}\n\tcomponentWillMount() {\n\t\tconst urlParams = new URLSearchParams(window.location.search);\n\t\tthis.onChange(\n\t\t\tnew URLSearchParams(window.location.search).get(\"scpl\") ||\n\t\t\t\t`ShowResult \"Hello ScPL\"\nChooseFromMenu \"ScPL Editor\" items=[\"Getting Started\", \"View Documentation\"]\nCase \"Getting Started\"\n    URL \"https://docs.scpl.dev/gettingstarted\"\nCase \"View Documentation\"\n    URL \"https://docs.scpl.dev/\"\nEnd Menu\nOpenURLs`\n\t\t);\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<div\n\t\t\t\tonKeyDown={e => {\n\t\t\t\t\tif (keys.save(e)) {\n\t\t\t\t\t\talert(\"save\");\n\t\t\t\t\t}\n\t\t\t\t\tif (keys.export(e)) {\n\t\t\t\t\t\tthis.setState({ openDownload: true });\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<div className=\"upload-area\" style={{ display: \"none\" }}>\n\t\t\t\t\t<div>Drop file anywhere to upload</div>\n\t\t\t\t</div>\n\t\t\t\t{this.state.openDownload ? (\n\t\t\t\t\t<DownloadModal\n\t\t\t\t\t\tonCancel={() => {\n\t\t\t\t\t\t\tthis.setState({ openDownload: false });\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tfilename={\n\t\t\t\t\t\t\tthis.state.shortcutData._filename ||\n\t\t\t\t\t\t\t\"download.shortcut\"\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfile={this.state.shortcutDownload}\n\t\t\t\t\t/>\n\t\t\t\t) : null}\n\t\t\t\t{this.state.showUploadShortcutModal ? (\n\t\t\t\t\t<UploadShortcutModal\n\t\t\t\t\t\tonCancel={() =>\n\t\t\t\t\t\t\tthis.setState({ showUploadShortcutModal: false })\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonResult={result => {\n\t\t\t\t\t\t\tthis.setState({ showUploadShortcutModal: false });\n\t\t\t\t\t\t\tthis.onChange(result);\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t) : null}\n\n\t\t\t\t<div className=\"editor-navigation\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={`mobile-filemenu${\n\t\t\t\t\t\t\tthis.state.mobileFilemenu ? \" open-filemenu\" : \"\"\n\t\t\t\t\t\t}`}\n\t\t\t\t\t\tstyle={{ display: \"none\" }}\n\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\tmobileFilemenu: !this.state.mobileFilemenu\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div className=\"editor-title\">ScPL Editor</div>\n\t\t\t\t\t\t<div className=\"editor-menu\">\n\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\tFile\n\t\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\thref=\"javascript:;\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowUploadShortcutModal: true\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tImport Shortcut from iCloud\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\thref=\"javascript:;\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\topenDownload: true\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tExport Shortcut\n\t\t\t\t\t\t\t\t\t\t\t\t<span>&#8679;{hotkey}S</span>\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"editor-menu\">\n\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\tEdit\n\t\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\thref=\"javascript:;\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.getAce().undo()\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tUndo<span>{hotkey}Z</span>\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\thref=\"javascript:;\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.getAce().redo()\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tRedo\n\t\t\t\t\t\t\t\t\t\t\t\t<span>&#8679;{hotkey}Z</span>\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t<div className=\"menu-div\" />\n\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\thref=\"javascript:;\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tdocument.execCommand(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"cut\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t) ||\n\t\t\t\t\t\t\t\t\t\t\t\t\talert(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"Please press ctrl/cmd+x to cut\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tCut<span>{hotkey}X</span>\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\thref=\"javascript:;\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tdocument.execCommand(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"copy\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t) &&\n\t\t\t\t\t\t\t\t\t\t\t\t\talert(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"Please press ctrl/cmd+c to copy\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tCopy<span>{hotkey}C</span>\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\thref=\"javascript:;\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tdocument.execCommand(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"paste\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t) ||\n\t\t\t\t\t\t\t\t\t\t\t\t\talert(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"Please press ctrl/cmd+v to paste.\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tPaste<span>{hotkey}P</span>\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t<div className=\"menu-div\" />\n\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\thref=\"javascript:;\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.getAce().selectAll()\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tSelect All\n\t\t\t\t\t\t\t\t\t\t\t\t<span>{hotkey}A</span>\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\thref=\"javascript:;\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\t\tfindAndReplace.Search(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.getAce()\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tFind and Replace\n\t\t\t\t\t\t\t\t\t\t\t\t<span>{hotkey}F</span>\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"editor-menu\">\n\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\tHelp\n\t\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\thref=\"https://scpl.dev/\"\n\t\t\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tHomepage\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\thref=\"https://docs.scpl.dev/gettingstarted.html\"\n\t\t\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tGetting Started\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\t\thref=\"https://docs.scpl.dev/\"\n\t\t\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\tDocumentation\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"search-container\">\n\t\t\t\t\t\t<SearchActions\n\t\t\t\t\t\t\tinsertText={text => {\n\t\t\t\t\t\t\t\tconsole.log(\"insert\", text);\n\t\t\t\t\t\t\t\tconst reactAceComponent = this\n\t\t\t\t\t\t\t\t\t.reactAceComponentRef.current;\n\t\t\t\t\t\t\t\tconst editor = (reactAceComponent as any)\n\t\t\t\t\t\t\t\t\t.editor as ace.Editor;\n\t\t\t\t\t\t\t\teditor.session.insert(\n\t\t\t\t\t\t\t\t\teditor.getCursorPosition(),\n\t\t\t\t\t\t\t\t\ttext\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\t\t\teditor.session.getValue(),\n\t\t\t\t\t\t\t\t\ttext,\n\t\t\t\t\t\t\t\t\teditor.getCursorPosition()\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\tfileValue: editor.session.getValue()\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div className=\"result-details\">\n\t\t\t\t\t\t\t<div className=\"result-actions\">\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.state.shortcutData[0].WFWorkflowActions\n\t\t\t\t\t\t\t\t\t\t.length\n\t\t\t\t\t\t\t\t}{\" \"}\n\t\t\t\t\t\t\t\taction\n\t\t\t\t\t\t\t\t{this.state.shortcutData[0].WFWorkflowActions\n\t\t\t\t\t\t\t\t\t.length === 1\n\t\t\t\t\t\t\t\t\t? \"\"\n\t\t\t\t\t\t\t\t\t: \"s\"}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className=\"editor-btn\" id=\"run-preview\">\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref=\"javascript:;\"\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\t\tshowPreviewFullscreen: !this.state\n\t\t\t\t\t\t\t\t\t\t\t.showPreviewFullscreen,\n\t\t\t\t\t\t\t\t\t\tshowPreview: !this.state\n\t\t\t\t\t\t\t\t\t\t\t.showPreviewFullscreen\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tPreview\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"editor-btn primary-btn\"\n\t\t\t\t\t\t\tid=\"open-download\"\n\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\topenDownload: true\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<a href=\"javascript:;\">Export</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"editor-container\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={`file-pane${\n\t\t\t\t\t\t\tthis.state.mobileFilemenu ? \" open-menu\" : \"\"\n\t\t\t\t\t\t}`}\n\t\t\t\t\t>\n\t\t\t\t\t\t<FilePane\n\t\t\t\t\t\t\tfiles={[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttype: \"file\" as \"file\",\n\t\t\t\t\t\t\t\t\tname: \"My File.scpl\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttype: \"file\" as \"file\",\n\t\t\t\t\t\t\t\t\tname: \"Another File.scpl\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttype: \"folder\" as \"folder\",\n\t\t\t\t\t\t\t\t\tname: \"A Folder\",\n\t\t\t\t\t\t\t\t\tfiles: [\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttype: \"file\" as \"file\",\n\t\t\t\t\t\t\t\t\t\t\tname: \"My File.scpl\"\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttype: \"folder\" as \"folder\",\n\t\t\t\t\t\t\t\t\t\t\tname: \"My Folder\",\n\t\t\t\t\t\t\t\t\t\t\tfiles: [\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype: \"file\" as \"file\",\n\t\t\t\t\t\t\t\t\t\t\t\t\tname: \"A Shortcut.scpl\"\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttype: \"file\" as \"file\",\n\t\t\t\t\t\t\t\t\t\t\tname: \"Look at all these files.scpl\"\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttype: \"file\" as \"file\",\n\t\t\t\t\t\t\t\t\tname: \"My File 2.scpl\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttype: \"file\" as \"file\",\n\t\t\t\t\t\t\t\t\tname: \"Another File 2.scpl\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\tonActiveFileChanged={file => this.onChange(file)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"code-pane\">\n\t\t\t\t\t\t<div className=\"error-messages\">\n\t\t\t\t\t\t\t{this.state.errors.map(err => (\n\t\t\t\t\t\t\t\t<div className=\"e-message\">\n\t\t\t\t\t\t\t\t\t<div className=\"message-content\">\n\t\t\t\t\t\t\t\t\t\t{err.message}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"jump-error\">\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\tthis.jumpToError(err)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\tJump\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"tabs-nav\">\n\t\t\t\t\t\t\t{this.state.tabs.length > 1 ? (\n\t\t\t\t\t\t\t\t<div className=\"file-tabs\">\n\t\t\t\t\t\t\t\t\t{this.state.tabs.map(tab => (\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tclassName={`tab ${\n\t\t\t\t\t\t\t\t\t\t\t\ttab.active ? \"active-tab\" : \"\"\n\t\t\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"tab-close\">\n\t\t\t\t\t\t\t\t\t\t\t\t&times;\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"tab-label\">\n\t\t\t\t\t\t\t\t\t\t\t\t{tab.filename}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<AceEditor\n\t\t\t\t\t\t\tmode=\"scpl\"\n\t\t\t\t\t\t\ttheme=\"chrome\"\n\t\t\t\t\t\t\tonChange={this.onChange.bind(this)}\n\t\t\t\t\t\t\tname=\"ace_editor\"\n\t\t\t\t\t\t\teditorProps={{ $blockScrolling: Infinity }}\n\t\t\t\t\t\t\tvalue={this.state.fileValue || \"\"}\n\t\t\t\t\t\t\tannotations={this.state.annotations}\n\t\t\t\t\t\t\tmarkers={this.state.markers}\n\t\t\t\t\t\t\tref={this.reactAceComponentRef}\n\t\t\t\t\t\t\tshowPrintMargin={false}\n\t\t\t\t\t\t\tenableBasicAutocompletion={true}\n\t\t\t\t\t\t\tenableLiveAutocompletion={true}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={`result-pane${\n\t\t\t\t\t\t\tthis.state.loading && this.state.showPreview\n\t\t\t\t\t\t\t\t? \" loading\"\n\t\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t\t}${\n\t\t\t\t\t\t\t!this.state.showPreviewFullscreen\n\t\t\t\t\t\t\t\t? \" mobiledisabled\"\n\t\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t\t}`}\n\t\t\t\t\t\t// style={{\n\t\t\t\t\t\t// \tdisplay: this.state.showPreview ? \"none\" : \"block\"\n\t\t\t\t\t\t// }}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"result-text\">\n\t\t\t\t\t\t\tConverted in {this.state.took.convertedIn} ms.\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{this.state.showPreview &&\n\t\t\t\t\t\tthis.state.errors.length === 0 ? (\n\t\t\t\t\t\t\t<ErrorBoundary\n\t\t\t\t\t\t\t\terrorDisplay={err => (\n\t\t\t\t\t\t\t\t\t<div className=\"error-overlay too-many-actions shortcut-preview-fatal-error\">\n\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\tA fatal error occured in\n\t\t\t\t\t\t\t\t\t\t\tshortcut-preview. The error is{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t{err.toString()}\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<ShortcutPreview\n\t\t\t\t\t\t\t\t\tonInteract={data =>\n\t\t\t\t\t\t\t\t\t\tthis.onActionSelect(data)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tdata={this.state.shortcutData}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</ErrorBoundary>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t<div className=\"loading-result-progress\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div className=\"spinner\">\n\t\t\t\t\t\t\t\t\t<div className=\"bar1\" />\n\t\t\t\t\t\t\t\t\t<div className=\"bar2\" />\n\t\t\t\t\t\t\t\t\t<div className=\"bar3\" />\n\t\t\t\t\t\t\t\t\t<div className=\"bar4\" />\n\t\t\t\t\t\t\t\t\t<div className=\"bar5\" />\n\t\t\t\t\t\t\t\t\t<div className=\"bar6\" />\n\t\t\t\t\t\t\t\t\t<div className=\"bar7\" />\n\t\t\t\t\t\t\t\t\t<div className=\"bar8\" />\n\t\t\t\t\t\t\t\t\t<div className=\"bar9\" />\n\t\t\t\t\t\t\t\t\t<div className=\"bar10\" />\n\t\t\t\t\t\t\t\t\t<div className=\"bar11\" />\n\t\t\t\t\t\t\t\t\t<div className=\"bar12\" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{!this.state.showPreview ? (\n\t\t\t\t\t\t\t<div className=\"error-overlay too-many-actions\">\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\tThere are too many actions to render a\n\t\t\t\t\t\t\t\t\t\tpreview automatically.\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclassName=\"btn trans-btn\"\n\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\t\t\t\tshowPreview: true\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tRender Preview\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t{this.state.errors.length !== 0 ? (\n\t\t\t\t\t\t\t<div className=\"too-many-actions render-error\">\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\tFailed to render because of code error.\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\tonActionSelect(data: { type: \"action\" | \"parameter\"; actionData: any }) {\n\t\tif (data.actionData.SCPLData) {\n\t\t\tconst scpldata = data.actionData.SCPLData;\n\n\t\t\tconst reactAceComponent = this.reactAceComponentRef.current;\n\t\t\tif (!reactAceComponent) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst editor = (reactAceComponent as any).editor as ace.Editor;\n\t\t\t// .Position.start|end\n\t\t\tconst line = scpldata.Position.start[0];\n\t\t\tconst col = scpldata.Position.start[1] - 1;\n\t\t\teditor.gotoLine(line, col, true);\n\t\t\teditor.selection.setRange(\n\t\t\t\tnew Range(\n\t\t\t\t\tscpldata.Position.start[0] - 1,\n\t\t\t\t\tscpldata.Position.start[1] - 1,\n\t\t\t\t\tscpldata.Position.end[0] - 1,\n\t\t\t\t\tscpldata.Position.end[1] - 1\n\t\t\t\t),\n\t\t\t\ttrue\n\t\t\t);\n\t\t}\n\t}\n\tgetAce(): ace.Editor {\n\t\tconst reactAceComponent = this.reactAceComponentRef.current;\n\t\tif (!reactAceComponent) {\n\t\t\tthrow new Error(\"No reactacecomponent\");\n\t\t}\n\t\tconst editor = (reactAceComponent as any).editor as ace.Editor;\n\t\treturn editor;\n\t}\n\tjumpToError(d: {\n\t\tstartCol: number;\n\t\tstartRow: number;\n\t\tendCol: number;\n\t\tendRow: number;\n\t}) {\n\t\tconst reactAceComponent = this.reactAceComponentRef.current;\n\t\tif (!reactAceComponent) {\n\t\t\treturn;\n\t\t}\n\t\tconst editor = (reactAceComponent as any).editor as ace.Editor;\n\t\tconst line = d.startRow;\n\t\tconst col = d.startCol - 1;\n\t\teditor.gotoLine(line, col, true);\n\t\teditor.selection.setRange(\n\t\t\tnew Range(\n\t\t\t\td.startRow - 1,\n\t\t\t\td.startCol - 1,\n\t\t\t\td.endRow - 1,\n\t\t\t\td.endCol - 1\n\t\t\t),\n\t\t\ttrue\n\t\t);\n\t}\n\tonChange(text: string) {\n\t\tconst willWaitFor = Math.max(this.state.took.convertedIn * 4, 100);\n\t\tif (!this.state.loading) {\n\t\t\tthis.setState({\n\t\t\t\tshowPreview: this.state.took.convertedIn < 50,\n\t\t\t\tfileValue: text,\n\t\t\t\tloading: true\n\t\t\t});\n\t\t}\n\t\tif (timeout) {\n\t\t\tclearTimeout(timeout);\n\t\t}\n\t\ttimeout = setTimeout(\n\t\t\t() => this.onChangeLimited(text, willWaitFor),\n\t\t\twillWaitFor\n\t\t);\n\t}\n\tonChangeLimited(text: string, waitedFor: number) {\n\t\t// parse\n\t\tlet output: { shortcutjson: any; shortcutplist: Buffer };\n\t\tconst startTime = new Date().getTime();\n\t\ttry {\n\t\t\toutput = parse(text, { make: [\"shortcutjson\", \"shortcutplist\"] });\n\t\t} catch (er) {\n\t\t\tconsole.log(er.message); //eslint-disable-line no-console\n\t\t\tif (!(er instanceof PositionedError)) {\n\t\t\t\tthrow er;\n\t\t\t}\n\t\t\tthis.setState({\n\t\t\t\tfileValue: text,\n\t\t\t\tloading: false,\n\t\t\t\tshortcutDownload: undefined,\n\t\t\t\ttook: {\n\t\t\t\t\twaitedFor: waitedFor,\n\t\t\t\t\tconvertedIn: new Date().getTime() - startTime\n\t\t\t\t},\n\t\t\t\tannotations: [\n\t\t\t\t\t{\n\t\t\t\t\t\trow: er.start[0] - 1,\n\t\t\t\t\t\tcolumn: er.start[1] - 1,\n\t\t\t\t\t\ttext: er.message, // Or the Json reply from the parser\n\t\t\t\t\t\ttype: \"error\" // also warning and information\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\tmarkers: [\n\t\t\t\t\t{\n\t\t\t\t\t\tstartRow: er.start[0] - 1,\n\t\t\t\t\t\tendRow: er.end[0] - 1,\n\t\t\t\t\t\tstartCol: er.start[1] - 1,\n\t\t\t\t\t\tendCol: er.end[1] - 1,\n\t\t\t\t\t\tclassName: \"ace_active-line error\",\n\t\t\t\t\t\ttype: \"background\"\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\terrors: [\n\t\t\t\t\t{\n\t\t\t\t\t\tstartRow: er.start[0],\n\t\t\t\t\t\tendRow: er.end[0],\n\t\t\t\t\t\tstartCol: er.start[1],\n\t\t\t\t\t\tendCol: er.end[1],\n\t\t\t\t\t\tmessage: er.message\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tconst { shortcutjson, shortcutplist } = output;\n\t\tthis.setState({\n\t\t\tfileValue: text,\n\t\t\ttook: {\n\t\t\t\twaitedFor: waitedFor,\n\t\t\t\tconvertedIn: new Date().getTime() - startTime\n\t\t\t},\n\t\t\tloading: false,\n\t\t\tshortcutData: shortcutjson,\n\t\t\tannotations: [],\n\t\t\tmarkers: [],\n\t\t\terrors: [],\n\t\t\tshortcutDownload: shortcutplist\n\t\t});\n\t}\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}