{"ast":null,"code":"import _classCallCheck from \"/Users/brandonjordan/Documents/GitHub/scpl-editor/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/brandonjordan/Documents/GitHub/scpl-editor/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/brandonjordan/Documents/GitHub/scpl-editor/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/brandonjordan/Documents/GitHub/scpl-editor/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/brandonjordan/Documents/GitHub/scpl-editor/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/brandonjordan/Documents/GitHub/scpl-editor/src/FilePane.tsx\";\nimport React, { Component } from \"react\";\nimport Dropzone from \"react-dropzone\";\nimport { inverse } from \"scpl\";\nimport { FileManager } from \"./FileManager\";\nimport { CreateEditShortcut } from \"./CreateEditShortcut\";\nimport \"./FilePane.css\";\n\nvar ActionButtons =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ActionButtons, _Component);\n\n  function ActionButtons() {\n    _classCallCheck(this, ActionButtons);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ActionButtons).apply(this, arguments));\n  }\n\n  _createClass(ActionButtons, [{\n    key: \"render\",\n    value: function render() {\n      var _this = this;\n\n      return React.createElement(\"div\", {\n        className: \"action-btns\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 23\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"delete-btn\",\n        onClick: function onClick(e) {\n          e.stopPropagation();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 24\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"edit-btn\",\n        onClick: function onClick(e) {\n          e.stopPropagation();\n          var newName = prompt(\"Filename\", _this.props.data.name);\n\n          if (!newName) {\n            return;\n          }\n\n          FileManager.renameFile(_this.props.data.id, newName);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 30\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return ActionButtons;\n}(Component);\n\nvar FileComponent =\n/*#__PURE__*/\nfunction (_Component2) {\n  _inherits(FileComponent, _Component2);\n\n  function FileComponent() {\n    _classCallCheck(this, FileComponent);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(FileComponent).apply(this, arguments));\n  }\n\n  _createClass(FileComponent, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"li\", {\n        className: \"list-item-file \".concat(this.props.data.loading ? \"loading\" : \"\"),\n        onClick: function onClick(e) {\n          e.stopPropagation();\n          FileManager.loadFile(_this2.props.data.id);\n          FileManager.addTab(_this2.props.data.id);\n        },\n        title: this.props.data.name,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"item-name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"spinner\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"bar1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"bar2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"bar3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"bar4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"bar5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"bar6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"bar7\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"bar8\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"bar9\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"bar10\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"bar11\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"bar12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      })), this.props.data.name), React.createElement(ActionButtons, {\n        data: this.props.data,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return FileComponent;\n}(Component); // class FolderComponent extends Component<\n// \t{\n// \t\tdata: FolderData;\n// \t\tsearchTerm: string;\n// \t},\n// \t{\n// \t\texpanded: boolean;\n// \t}\n// > {\n// \tconstructor(\n// \t\tprops: Readonly<{\n// \t\t\tdata: FolderData;\n// \t\t\tsearchTerm: string;\n// \t\t}>\n// \t) {\n// \t\tsuper(props);\n// \t\tthis.state = { expanded: false };\n// \t}\n// \trender() {\n// \t\treturn (\n// \t\t\t<li\n// \t\t\t\tclassName={`list-item-folder ${\n// \t\t\t\t\tthis.state.expanded ? \"open-folder\" : \"\"\n// \t\t\t\t}`}\n// \t\t\t\tonClick={e => {\n// \t\t\t\t\tthis.setState({ expanded: !this.state.expanded });\n// \t\t\t\t\te.stopPropagation();\n// \t\t\t\t}}\n// \t\t\t\ttitle={this.props.data.name}\n// \t\t\t>\n// \t\t\t\t<div>\n// \t\t\t\t\t<div className=\"item-name\">\n// \t\t\t\t\t\t<div className=\"spinner\">\n// \t\t\t\t\t\t\t<div className=\"bar1\" />\n// \t\t\t\t\t\t\t<div className=\"bar2\" />\n// \t\t\t\t\t\t\t<div className=\"bar3\" />\n// \t\t\t\t\t\t\t<div className=\"bar4\" />\n// \t\t\t\t\t\t\t<div className=\"bar5\" />\n// \t\t\t\t\t\t\t<div className=\"bar6\" />\n// \t\t\t\t\t\t\t<div className=\"bar7\" />\n// \t\t\t\t\t\t\t<div className=\"bar8\" />\n// \t\t\t\t\t\t\t<div className=\"bar9\" />\n// \t\t\t\t\t\t\t<div className=\"bar10\" />\n// \t\t\t\t\t\t\t<div className=\"bar11\" />\n// \t\t\t\t\t\t\t<div className=\"bar12\" />\n// \t\t\t\t\t\t</div>\n// \t\t\t\t\t\t{this.props.data.name}\n// \t\t\t\t\t</div>\n// \t\t\t\t\t<ActionButtons />\n// \t\t\t\t</div>\n// \t\t\t\t<FileList\n// \t\t\t\t\tfiles={this.props.data.files}\n// \t\t\t\t\tsearchTerm={this.props.searchTerm}\n// \t\t\t\t/>\n// \t\t\t</li>\n// \t\t);\n// \t}\n// }\n// sort:\n// a.order - b.order != 0 ? a.order - b.order\n// : a.name.localeCompare(b.name, undefined, {numeric: true})\n\n\nvar FileList =\n/*#__PURE__*/\nfunction (_Component3) {\n  _inherits(FileList, _Component3);\n\n  function FileList() {\n    _classCallCheck(this, FileList);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(FileList).apply(this, arguments));\n  }\n\n  _createClass(FileList, [{\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, this.props.files.map(function (file) {\n        // if (file.type === \"file\") {\n        if (file.name.toLowerCase().indexOf(_this3.props.searchTerm.toLowerCase()) > -1) {\n          return React.createElement(FileComponent, {\n            key: file.name,\n            data: file,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 167\n            },\n            __self: this\n          });\n        }\n\n        return null; // }\n        // return (\n        // \t<FolderComponent\n        // \t\tkey={file.name}\n        // \t\tdata={file}\n        // \t\tsearchTerm={this.props.searchTerm}\n        // \t/>\n        // );\n      }));\n    }\n  }]);\n\n  return FileList;\n}(Component);\n\nexport var FilePane =\n/*#__PURE__*/\nfunction (_Component4) {\n  _inherits(FilePane, _Component4);\n\n  function FilePane(props) {\n    var _this4;\n\n    _classCallCheck(this, FilePane);\n\n    _this4 = _possibleConstructorReturn(this, _getPrototypeOf(FilePane).call(this, props));\n    _this4.state = {\n      showFileModal: false,\n      searchTerm: \"\"\n    };\n    return _this4;\n  }\n\n  _createClass(FilePane, [{\n    key: \"onDrop\",\n    value: function onDrop(acceptedFiles, _rejectedFiles, _event) {\n      var _this5 = this;\n\n      var reader = new FileReader();\n\n      reader.onabort = function () {\n        return alert(\"file reading was aborted\");\n      };\n\n      reader.onerror = function () {\n        return alert(\"file reading has failed\");\n      };\n\n      reader.onload = function () {\n        // Do whatever you want with the file contents\n        var binaryStr = new Buffer(reader.result);\n        var inverted;\n\n        try {\n          inverted = inverse(binaryStr);\n        } catch (e) {\n          alert(\"An unhandled error occured while trying to convert shortcut -> scpl. The error is: \".concat(e.toString()));\n          throw new Error(e);\n        }\n\n        _this5.props.onActiveFileChanged(inverted);\n      };\n\n      acceptedFiles.forEach(function (file) {\n        return reader.readAsArrayBuffer(file);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this6 = this;\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }, React.createElement(Dropzone, {\n        onDrop: this.onDrop.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      }, function (_ref) {\n        var getRootProps = _ref.getRootProps,\n            getInputProps = _ref.getInputProps;\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 233\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"files-header\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 234\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"search\",\n          className: \"search-input\",\n          placeholder: \"Search Files\",\n          onKeyUp: function onKeyUp(e) {\n            return _this6.setState({\n              searchTerm: e.currentTarget.value\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 235\n          },\n          __self: this\n        }), React.createElement(\"div\", {\n          className: \"file-btns\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 245\n          },\n          __self: this\n        }, React.createElement(\"div\", Object.assign({\n          className: \"btn file-btn upload-btn\"\n        }, getRootProps(), {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 246\n          },\n          __self: this\n        }), React.createElement(\"input\", Object.assign({}, getInputProps(), {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 250\n          },\n          __self: this\n        }))), React.createElement(\"button\", {\n          className: \"btn file-btn import-btn\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 252\n          },\n          __self: this\n        }), React.createElement(\"button\", {\n          className: \"btn file-btn new-btn\",\n          onClick: function onClick() {\n            return _this6.setState({\n              showFileModal: true\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 253\n          },\n          __self: this\n        }), React.createElement(\"button\", {\n          className: \"btn file-btn newf-btn\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 261\n          },\n          __self: this\n        }))), React.createElement(\"div\", {\n          className: \"file-list\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 264\n          },\n          __self: this\n        }, React.createElement(FileList, {\n          files: _this6.props.files,\n          searchTerm: _this6.state.searchTerm,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 265\n          },\n          __self: this\n        })));\n      }), this.state.showFileModal ? React.createElement(CreateEditShortcut, {\n        onCancel: function onCancel() {\n          return _this6.setState({\n            showFileModal: false\n          });\n        },\n        onResult: function onResult(name, color, glyph) {\n          _this6.setState({\n            showFileModal: false\n          });\n\n          var id = FileManager.newID();\n          FileManager.createFile(\"@Color \".concat(color, \"\\n@Icon \").concat(glyph), name, id);\n          FileManager.addTab(id);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275\n        },\n        __self: this\n      }) : null);\n    }\n  }]);\n\n  return FilePane;\n}(Component);","map":{"version":3,"sources":["/Users/brandonjordan/Documents/GitHub/scpl-editor/src/FilePane.tsx"],"names":["React","Component","Dropzone","inverse","FileManager","CreateEditShortcut","ActionButtons","e","stopPropagation","newName","prompt","props","data","name","renameFile","id","FileComponent","loading","loadFile","addTab","FileList","files","map","file","toLowerCase","indexOf","searchTerm","FilePane","state","showFileModal","acceptedFiles","_rejectedFiles","_event","reader","FileReader","onabort","alert","onerror","onload","binaryStr","Buffer","result","inverted","toString","Error","onActiveFileChanged","forEach","readAsArrayBuffer","onDrop","bind","getRootProps","getInputProps","setState","currentTarget","value","color","glyph","newID","createFile"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Dropzone, { DropEvent } from \"react-dropzone\";\nimport { inverse } from \"scpl\";\n\nimport { FileManager } from \"./FileManager\";\n\nimport { CreateEditShortcut } from \"./CreateEditShortcut\";\n\nimport \"./FilePane.css\";\n\ntype FileData = { type: \"file\"; name: string };\ntype FolderData = {\n\ttype: \"folder\";\n\tname: string;\n\tfiles: (FileData | FolderData)[];\n};\n\nclass ActionButtons extends Component<{\n\tdata: { id: string; name: string; loading: boolean };\n}> {\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"action-btns\">\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"delete-btn\"\n\t\t\t\t\tonClick={e => {\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"edit-btn\"\n\t\t\t\t\tonClick={e => {\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\tconst newName = prompt(\n\t\t\t\t\t\t\t\"Filename\",\n\t\t\t\t\t\t\tthis.props.data.name\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (!newName) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tFileManager.renameFile(this.props.data.id, newName);\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nclass FileComponent extends Component<{\n\tdata: { id: string; name: string; loading: boolean };\n}> {\n\trender() {\n\t\treturn (\n\t\t\t<li\n\t\t\t\tclassName={`list-item-file ${\n\t\t\t\t\tthis.props.data.loading ? \"loading\" : \"\"\n\t\t\t\t}`}\n\t\t\t\tonClick={e => {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tFileManager.loadFile(this.props.data.id);\n\t\t\t\t\tFileManager.addTab(this.props.data.id);\n\t\t\t\t}}\n\t\t\t\ttitle={this.props.data.name}\n\t\t\t>\n\t\t\t\t<div>\n\t\t\t\t\t<div className=\"item-name\">\n\t\t\t\t\t\t<div className=\"spinner\">\n\t\t\t\t\t\t\t<div className=\"bar1\" />\n\t\t\t\t\t\t\t<div className=\"bar2\" />\n\t\t\t\t\t\t\t<div className=\"bar3\" />\n\t\t\t\t\t\t\t<div className=\"bar4\" />\n\t\t\t\t\t\t\t<div className=\"bar5\" />\n\t\t\t\t\t\t\t<div className=\"bar6\" />\n\t\t\t\t\t\t\t<div className=\"bar7\" />\n\t\t\t\t\t\t\t<div className=\"bar8\" />\n\t\t\t\t\t\t\t<div className=\"bar9\" />\n\t\t\t\t\t\t\t<div className=\"bar10\" />\n\t\t\t\t\t\t\t<div className=\"bar11\" />\n\t\t\t\t\t\t\t<div className=\"bar12\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{this.props.data.name}\n\t\t\t\t\t</div>\n\t\t\t\t\t<ActionButtons data={this.props.data} />\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t);\n\t}\n}\n\n// class FolderComponent extends Component<\n// \t{\n// \t\tdata: FolderData;\n// \t\tsearchTerm: string;\n// \t},\n// \t{\n// \t\texpanded: boolean;\n// \t}\n// > {\n// \tconstructor(\n// \t\tprops: Readonly<{\n// \t\t\tdata: FolderData;\n// \t\t\tsearchTerm: string;\n// \t\t}>\n// \t) {\n// \t\tsuper(props);\n// \t\tthis.state = { expanded: false };\n// \t}\n// \trender() {\n// \t\treturn (\n// \t\t\t<li\n// \t\t\t\tclassName={`list-item-folder ${\n// \t\t\t\t\tthis.state.expanded ? \"open-folder\" : \"\"\n// \t\t\t\t}`}\n// \t\t\t\tonClick={e => {\n// \t\t\t\t\tthis.setState({ expanded: !this.state.expanded });\n// \t\t\t\t\te.stopPropagation();\n// \t\t\t\t}}\n// \t\t\t\ttitle={this.props.data.name}\n// \t\t\t>\n// \t\t\t\t<div>\n// \t\t\t\t\t<div className=\"item-name\">\n// \t\t\t\t\t\t<div className=\"spinner\">\n// \t\t\t\t\t\t\t<div className=\"bar1\" />\n// \t\t\t\t\t\t\t<div className=\"bar2\" />\n// \t\t\t\t\t\t\t<div className=\"bar3\" />\n// \t\t\t\t\t\t\t<div className=\"bar4\" />\n// \t\t\t\t\t\t\t<div className=\"bar5\" />\n// \t\t\t\t\t\t\t<div className=\"bar6\" />\n// \t\t\t\t\t\t\t<div className=\"bar7\" />\n// \t\t\t\t\t\t\t<div className=\"bar8\" />\n// \t\t\t\t\t\t\t<div className=\"bar9\" />\n// \t\t\t\t\t\t\t<div className=\"bar10\" />\n// \t\t\t\t\t\t\t<div className=\"bar11\" />\n// \t\t\t\t\t\t\t<div className=\"bar12\" />\n// \t\t\t\t\t\t</div>\n// \t\t\t\t\t\t{this.props.data.name}\n// \t\t\t\t\t</div>\n// \t\t\t\t\t<ActionButtons />\n// \t\t\t\t</div>\n// \t\t\t\t<FileList\n// \t\t\t\t\tfiles={this.props.data.files}\n// \t\t\t\t\tsearchTerm={this.props.searchTerm}\n// \t\t\t\t/>\n// \t\t\t</li>\n// \t\t);\n// \t}\n// }\n\n// sort:\n// a.order - b.order != 0 ? a.order - b.order\n// : a.name.localeCompare(b.name, undefined, {numeric: true})\n\nclass FileList extends Component<{\n\tfiles: { id: string; name: string; loading: boolean }[];\n\tsearchTerm: string;\n}> {\n\trender() {\n\t\treturn (\n\t\t\t<ul>\n\t\t\t\t{this.props.files.map(file => {\n\t\t\t\t\t// if (file.type === \"file\") {\n\t\t\t\t\tif (\n\t\t\t\t\t\tfile.name\n\t\t\t\t\t\t\t.toLowerCase()\n\t\t\t\t\t\t\t.indexOf(this.props.searchTerm.toLowerCase()) > -1\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn <FileComponent key={file.name} data={file} />;\n\t\t\t\t\t}\n\t\t\t\t\treturn null;\n\t\t\t\t\t// }\n\t\t\t\t\t// return (\n\t\t\t\t\t// \t<FolderComponent\n\t\t\t\t\t// \t\tkey={file.name}\n\t\t\t\t\t// \t\tdata={file}\n\t\t\t\t\t// \t\tsearchTerm={this.props.searchTerm}\n\t\t\t\t\t// \t/>\n\t\t\t\t\t// );\n\t\t\t\t})}\n\t\t\t</ul>\n\t\t);\n\t}\n}\n\nexport class FilePane extends Component<\n\t{\n\t\tonActiveFileChanged: (fileContents: string) => void;\n\t\tfiles: { id: string; name: string; loading: boolean }[];\n\t},\n\t{\n\t\tshowFileModal: boolean;\n\t\tsearchTerm: string;\n\t}\n> {\n\tconstructor(\n\t\tprops: Readonly<{\n\t\t\tonActiveFileChanged: (fileContents: string) => void;\n\t\t\tfiles: { id: string; name: string; loading: boolean }[];\n\t\t}>\n\t) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tshowFileModal: false,\n\t\t\tsearchTerm: \"\"\n\t\t};\n\t}\n\tonDrop(acceptedFiles: File[], _rejectedFiles: File[], _event: DropEvent) {\n\t\tconst reader = new FileReader();\n\n\t\treader.onabort = () => alert(\"file reading was aborted\");\n\t\treader.onerror = () => alert(\"file reading has failed\");\n\t\treader.onload = () => {\n\t\t\t// Do whatever you want with the file contents\n\t\t\tconst binaryStr = new Buffer(reader.result as ArrayBuffer);\n\t\t\tlet inverted: string;\n\t\t\ttry {\n\t\t\t\tinverted = inverse(binaryStr);\n\t\t\t} catch (e) {\n\t\t\t\talert(\n\t\t\t\t\t`An unhandled error occured while trying to convert shortcut -> scpl. The error is: ${e.toString()}`\n\t\t\t\t);\n\t\t\t\tthrow new Error(e);\n\t\t\t}\n\t\t\tthis.props.onActiveFileChanged(inverted);\n\t\t};\n\n\t\tacceptedFiles.forEach(file => reader.readAsArrayBuffer(file));\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<Dropzone onDrop={this.onDrop.bind(this)}>\n\t\t\t\t\t{({ getRootProps, getInputProps }) => (\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div className=\"files-header\">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"search\"\n\t\t\t\t\t\t\t\t\tclassName=\"search-input\"\n\t\t\t\t\t\t\t\t\tplaceholder=\"Search Files\"\n\t\t\t\t\t\t\t\t\tonKeyUp={e =>\n\t\t\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\t\t\tsearchTerm: e.currentTarget.value\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<div className=\"file-btns\">\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName=\"btn file-btn upload-btn\"\n\t\t\t\t\t\t\t\t\t\t{...getRootProps()}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<input {...getInputProps()} />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<button className=\"btn file-btn import-btn\" />\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclassName=\"btn file-btn new-btn\"\n\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\t\t\t\t\t\tshowFileModal: true\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<button className=\"btn file-btn newf-btn\" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"file-list\">\n\t\t\t\t\t\t\t\t<FileList\n\t\t\t\t\t\t\t\t\tfiles={this.props.files}\n\t\t\t\t\t\t\t\t\tsearchTerm={this.state.searchTerm}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</Dropzone>\n\n\t\t\t\t{this.state.showFileModal ? (\n\t\t\t\t\t<CreateEditShortcut\n\t\t\t\t\t\tonCancel={() => this.setState({ showFileModal: false })}\n\t\t\t\t\t\tonResult={(name, color, glyph) => {\n\t\t\t\t\t\t\tthis.setState({ showFileModal: false });\n\t\t\t\t\t\t\tconst id = FileManager.newID();\n\t\t\t\t\t\t\tFileManager.createFile(\n\t\t\t\t\t\t\t\t`@Color ${color}\\n@Icon ${glyph}`,\n\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tFileManager.addTab(id);\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t) : null}\n\t\t\t</div>\n\t\t);\n\t}\n}\n"]},"metadata":{},"sourceType":"module"}